Index: app/src/main/java/com/maths/beyond_school_280720220930/firebase/CallFirebaseForInfo.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.maths.beyond_school_280720220930.firebase;\r\n\r\nimport android.content.Context;\r\nimport android.util.Log;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\n\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.CollectionReference;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\nimport com.maths.beyond_school_280720220930.R;\r\nimport com.maths.beyond_school_280720220930.SP.PrefConfig;\r\nimport com.maths.beyond_school_280720220930.TabbedHomePage;\r\nimport com.maths.beyond_school_280720220930.database.grade_tables.GradeDatabase;\r\nimport com.maths.beyond_school_280720220930.model.KidsActivity;\r\nimport com.maths.beyond_school_280720220930.utils.UtilityFunctions;\r\nimport com.razorpay.PaymentData;\r\n\r\n\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class CallFirebaseForInfo {\r\n\r\n    FirebaseFirestore firebaseFirestore = FirebaseFirestore.getInstance();\r\n    FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n    FirebaseUser mCurrentUser = mAuth.getCurrentUser();\r\n    QuerySnapshot qD = null;\r\n    public static final String TAG = \"CallFirebaseInfo\";\r\n\r\n    public QuerySnapshot retrieveKidsInfo() {\r\n\r\n        firebaseFirestore.collection(\"users\").document(mCurrentUser.getUid()).collection(\"kids\").get()\r\n                .addOnSuccessListener(queryDocumentSnapshots -> {\r\n                    if (queryDocumentSnapshots.isEmpty()) {\r\n                        //     Toast.makeText(this, \"No data\", Toast.LENGTH_SHORT).show();\r\n                        Log.i(\"No_data\", \"No_data\");\r\n                    } else {\r\n                        qD = queryDocumentSnapshots;\r\n\r\n                    }\r\n                });\r\n\r\n        return qD;\r\n\r\n    }\r\n\r\n    public static void checkActivityData(FirebaseFirestore firebaseFirestore, JSONArray kidsJsonArray, String status, FirebaseAuth auth, String kidsId, String chapters, String subSub, int correctAnswer, int wrongAnswer, int noQuestion, String subject) throws JSONException {\r\n\r\n\r\n        DocumentReference kidsActivityRef = firebaseFirestore.collection(\"users\").document(auth.getCurrentUser().getUid())\r\n                .collection(\"kids\").document(kidsId).collection(\"grades\").document(\"grade1\").collection(\"test\").document(subject + \"_\" + subSub + \"_\" + chapters);\r\n        JSONObject kidsActivityJsonObj = new JSONObject();\r\n        kidsActivityJsonObj.put(\"result\", kidsJsonArray);\r\n\r\n        Map<String, Object> activityData = new HashMap<>();\r\n        activityData.put(\"time_stamp\", new Date().getTime());\r\n        activityData.put(\"result\", kidsActivityJsonObj.toString());\r\n        activityData.put(\"status\", status);\r\n        activityData.put(\"correct\", correctAnswer);\r\n        activityData.put(\"wrong\", wrongAnswer);\r\n        activityData.put(\"total_count\", noQuestion);\r\n\r\n\r\n        kidsActivityRef.get().addOnSuccessListener(documentSnapshot -> {\r\n            if (documentSnapshot.exists()) {\r\n\r\n                KidsActivity kidsActivity = documentSnapshot.toObject(KidsActivity.class);\r\n                if (!kidsActivity.getStatus().equals(\"pass\")) {\r\n\r\n                    storeActivityData(kidsActivityRef, activityData);\r\n                } else {\r\n\r\n                    updateKidsData(kidsActivityRef, kidsActivity.getCorrect() + correctAnswer, kidsActivity.getWrong() + wrongAnswer, kidsActivity.getTotal_count() + noQuestion);\r\n                }\r\n            } else {\r\n                storeActivityData(kidsActivityRef, activityData);\r\n            }\r\n\r\n        });\r\n\r\n\r\n    }\r\n\r\n    public static void checkActivityData(FirebaseFirestore firebaseFirestore, JSONArray kidsJsonArray, String status, FirebaseAuth auth, String kidsId, String grade, String chapters, String subSub,String blockId, int correctAnswer, int wrongAnswer, int noQuestion, String subject) throws JSONException {\r\n\r\n\r\n        DocumentReference kidsActivityRef = firebaseFirestore.collection(\"users\").document(auth.getCurrentUser().getUid())\r\n                .collection(\"kids\").document(kidsId).collection(\"grades\").document(grade).collection(\"test\").document(subject + \"_\" + subSub + \"_\" + chapters+\"_\"+blockId);\r\n        JSONObject kidsActivityJsonObj = new JSONObject();\r\n        kidsActivityJsonObj.put(\"result\", kidsJsonArray);\r\n\r\n        Map<String, Object> activityData = new HashMap<>();\r\n        activityData.put(\"time_stamp\", new Date().getTime());\r\n        activityData.put(\"result\", kidsActivityJsonObj.toString());\r\n        activityData.put(\"status\", status);\r\n        activityData.put(\"correct\", correctAnswer);\r\n        activityData.put(\"wrong\", wrongAnswer);\r\n        activityData.put(\"total_count\", noQuestion);\r\n\r\n\r\n        kidsActivityRef.get().addOnSuccessListener(documentSnapshot -> {\r\n            if (documentSnapshot.exists()) {\r\n\r\n                KidsActivity kidsActivity = documentSnapshot.toObject(KidsActivity.class);\r\n                if (!kidsActivity.getStatus().equals(\"pass\")) {\r\n\r\n                    storeActivityData(kidsActivityRef, activityData);\r\n                } else {\r\n\r\n                    updateKidsData(kidsActivityRef, kidsActivity.getCorrect() + correctAnswer, kidsActivity.getWrong() + wrongAnswer, kidsActivity.getTotal_count() + noQuestion);\r\n                }\r\n            } else {\r\n                storeActivityData(kidsActivityRef, activityData);\r\n            }\r\n\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Log.d(TAG,e.getMessage());\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private static void updateKidsData(DocumentReference kidsActivityRef, long correct, long wrong, long total) {\r\n\r\n\r\n        kidsActivityRef.update(\"correct\", correct, \"wrong\", wrong, \"total_count\", total).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n            @Override\r\n            public void onSuccess(Void unused) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    public static void storeActivityData(DocumentReference kidsActivityRef, Map<String, Object> activityData) {\r\n\r\n        kidsActivityRef\r\n                .set(activityData)\r\n                .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                    @Override\r\n                    public void onSuccess(Void aVoid) {\r\n                         Log.d(TAG, \"DocumentSnapshot successfully written!\");\r\n                        //    Toast.makeText(getApplicationContext(),\"added\",Toast.LENGTH_SHORT).show();\r\n                    }\r\n                })\r\n                .addOnFailureListener(new OnFailureListener() {\r\n                    @Override\r\n                    public void onFailure(@NonNull Exception e) {\r\n                        Log.d(TAG, \"Error writing document\", e);\r\n                    }\r\n                });\r\n\r\n\r\n    }\r\n\r\n\r\n    public static boolean checkPaymentStatus() {\r\n        return false;\r\n    }\r\n\r\n    public static void setSubscriptionId(FirebaseFirestore firebaseFirestore, FirebaseAuth mAuth, String subscriptionId, String plan_id, String customerId) {\r\n\r\n        Map subscriptionMap = new HashMap();\r\n        subscriptionMap.put(\"subscription_id\", subscriptionId);\r\n        subscriptionMap.put(\"customer_id\", customerId);\r\n        subscriptionMap.put(\"plan_id\", plan_id);\r\n        firebaseFirestore.collection(\"users\").document(mAuth.getCurrentUser().getUid()).update(subscriptionMap);\r\n        firebaseFirestore.collection(\"users\").document(mAuth.getCurrentUser().getUid()).collection(\"subscription\").document().update(subscriptionMap).addOnCompleteListener(new OnCompleteListener<Void>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<Void> task) {\r\n\r\n\r\n                Log.d(TAG, \"onComplete: added\");\r\n\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Log.d(TAG, \"onFailure: \");\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    public static void setSubscriptionId(FirebaseFirestore firebaseFirestore, FirebaseAuth mAuth, String subscriptionId, String plan_id, String customerId, int planValue, int trialPeriod,Context context) {\r\n\r\n\r\n        Date date=new Date();\r\n        PrefConfig.writeIdInPref(context,date.toString(),context.getResources().getString(R.string.created_at));\r\n\r\n        Map subscriptionMap = new HashMap();\r\n        subscriptionMap.put(\"subscription_id\", subscriptionId);\r\n        subscriptionMap.put(\"customer_id\", customerId);\r\n        subscriptionMap.put(\"plan_id\", plan_id);\r\n        subscriptionMap.put(\"trial_period\", trialPeriod);\r\n        subscriptionMap.put(\"plan_value\", planValue);\r\n        subscriptionMap.put(\"no_of_days\",0);\r\n        subscriptionMap.put(\"created_at\",date.toString());\r\n\r\n\r\n        firebaseFirestore.collection(\"users\").document(mAuth.getCurrentUser().getUid()).set(subscriptionMap);\r\n        firebaseFirestore.collection(\"users\").document(mAuth.getCurrentUser().getUid()).collection(\"subscription\").document().set(subscriptionMap).addOnCompleteListener(new OnCompleteListener<Void>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<Void> task) {\r\n\r\n\r\n                Log.d(TAG, \"onComplete: added\");\r\n\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Log.d(TAG, \"onFailure: \");\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    public static void setTrialPeriod(FirebaseFirestore firebaseFirestore, FirebaseAuth mAuth, int trialPeriod) {\r\n\r\n        Map trialMap = new HashMap();\r\n        trialMap.put(\"trial_period\", trialPeriod);\r\n\r\n        firebaseFirestore.collection(\"users\").document(mAuth.getCurrentUser().getUid()).update(trialMap).addOnCompleteListener(new OnCompleteListener() {\r\n            @Override\r\n            public void onComplete(@NonNull Task task) {\r\n                Log.d(TAG, \"onComplete: \");\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Log.d(TAG, \"onFailure: \");\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    public static void setPlanValue(FirebaseFirestore firebaseFirestore, FirebaseAuth mAuth, int planValue) {\r\n\r\n        Map trialMap = new HashMap();\r\n        trialMap.put(\"plan_value\", planValue);\r\n\r\n        firebaseFirestore.collection(\"users\").document(mAuth.getCurrentUser().getUid()).update(trialMap).addOnCompleteListener(new OnCompleteListener() {\r\n            @Override\r\n            public void onComplete(@NonNull Task task) {\r\n                Log.d(TAG, \"onComplete: \");\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Log.d(TAG, \"onFailure: \");\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    public static void setNoOfDays(FirebaseFirestore firebaseFirestore, FirebaseAuth mAuth, int setNoOfDays) {\r\n\r\n        Map trialMap = new HashMap();\r\n        trialMap.put(\"no_of_days\", setNoOfDays);\r\n\r\n        firebaseFirestore.collection(\"users\").document(mAuth.getCurrentUser().getUid()).update(trialMap).addOnCompleteListener(new OnCompleteListener() {\r\n            @Override\r\n            public void onComplete(@NonNull Task task) {\r\n                Log.d(TAG, \"onComplete: \");\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Log.d(TAG, \"onFailure: \");\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    public static void getSubscriptionStatus(FirebaseFirestore firebaseFirestore, FirebaseAuth mAuth, Context context, Callback callback) {\r\n\r\n\r\n        firebaseFirestore.collection(\"users\").document(mAuth.getCurrentUser().getUid()).get().addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<DocumentSnapshot> task) {\r\n                DocumentSnapshot snapshot = task.getResult();\r\n                try {\r\n                    PrefConfig.writeIdInPref(context, snapshot.getString(\"customer_id\"), context.getResources().getString(R.string.customer_id));\r\n                    PrefConfig.writeIdInPref(context, snapshot.getString(\"subscription_id\"), context.getResources().getString(R.string.subscription_id));\r\n                    PrefConfig.writeIdInPref(context, snapshot.getString(\"plan_id\"), context.getResources().getString(R.string.plan_id));\r\n                    PrefConfig.writeIdInPref(context,snapshot.getString(\"created_at\"),context.getResources().getString(R.string.created_at));\r\n                    PrefConfig.writeIntDInPref(context, Math.toIntExact(snapshot.getLong(\"no_of_days\")), context.getResources().getString(R.string.noOfdays));\r\n                    PrefConfig.writeIntInPref(context, Math.toIntExact(snapshot.getLong(\"plan_value\")), context.getResources().getString(R.string.plan_value));\r\n                    PrefConfig.writeIntInPref(context, Math.toIntExact(snapshot.getLong(\"trial_period\")), context.getResources().getString(R.string.trial_period));\r\n                } catch (Exception e) {\r\n                }\r\n                Log.d(TAG, \"onComplete: \" + snapshot.getString(\"customer_id\"));\r\n                callback.dataUpdated();\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    public static void addPaymentInfo(FirebaseFirestore firebaseFirestore, FirebaseAuth mAuth, Boolean isPaymentDone, PaymentData paymentData, Context mContext) {\r\n\r\n\r\n        Date date = new Date();\r\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"dd MMM,yyyy\");\r\n        Map paymentMap = new HashMap();\r\n        paymentMap.put(\"isPaymentDone\", isPaymentDone);\r\n        paymentMap.put(\"date\", date.toString());\r\n        paymentMap.put(\"payment_id\", paymentData.getPaymentId());\r\n        paymentMap.put(\"payment_info\", paymentData.getData().toString());\r\n\r\n        firebaseFirestore.collection(\"users\").document(mAuth.getCurrentUser().getUid()).collection(\"payments\")\r\n                .document().set(paymentMap).addOnCompleteListener(new OnCompleteListener<Void>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<Void> task) {\r\n                        Log.d(\"FirebasePaymentData\", \"onSuccess: \");\r\n                    }\r\n                }).addOnFailureListener(new OnFailureListener() {\r\n                    @Override\r\n                    public void onFailure(@NonNull Exception e) {\r\n                        Toast.makeText(mContext, \"Data not Saved\", Toast.LENGTH_SHORT).show();\r\n                        Log.d(\"FirebasePaymentData\", \"onFailure: \");\r\n                    }\r\n                });\r\n\r\n\r\n    }\r\n\r\n    public static void upDateActivities(FirebaseFirestore kidsDb, FirebaseAuth mAuth, String kids_id, String grade, Context context, GradeDatabase database) {\r\n        CollectionReference kidsActivityRef = kidsDb.collection(\"users\").document(mAuth.getCurrentUser().getUid())\r\n                .collection(\"kids\").document(kids_id).collection(\"grades\").document(grade).collection(\"test\");\r\n\r\n        kidsActivityRef.get().addOnCompleteListener(new OnCompleteListener<QuerySnapshot>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<QuerySnapshot> task) {\r\n                if (task.isSuccessful()) {\r\n                    Log.d(\"TAG\", \"onComplete:Firebase Update \");\r\n                    for (QueryDocumentSnapshot document : task.getResult()) {\r\n\r\n                        KidsActivity kidsActivity = document.toObject(KidsActivity.class);\r\n\r\n\r\n                        if (kidsActivity.getStatus().equals(\"pass\")) {\r\n\r\n                            try {\r\n                                if (!document.getId().split(\"_\")[1].equals(\"multiplication\")) {\r\n                                    Log.i(\"doc_id\", document.getId().replace(\" \", \"\").split(\"_\")[1]);\r\n                                    UtilityFunctions.updateDbUnlock(database, document.getId().replace(\" \", \"\").split(\"_\")[1], document.getId().split(\"_\")[2],true);\r\n                                } else {\r\n                                    Log.i(\"doc_id\", document.getId().replace(\" \", \"\").split(\"_\")[2].split(\"\\\\(\")[1].split(\"\")[0]);\r\n                                    int maxVal = Integer.parseInt(document.getId().replace(\" \", \"\").split(\"_\")[2].split(\"\\\\(\")[1].split(\"\")[0]);\r\n                                    if (PrefConfig.readIntInPref(context, context.getResources().getString(R.string.multiplication_upto)) < maxVal) {\r\n                                        PrefConfig.writeIntInPref(context, maxVal, context.getResources().getString(R.string.multiplication_upto));\r\n                                    }\r\n\r\n                                }\r\n                            } catch (Exception e) {\r\n                            }\r\n\r\n\r\n                        }\r\n                    }\r\n                } else {\r\n                    Log.d(\"TAG\", \"Error getting documents: \", task.getException());\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n    public static void upDateActivities(FirebaseFirestore kidsDb, FirebaseAuth mAuth, String kids_id, String grade, Context context, GradeDatabase database, Callback callback) {\r\n        CollectionReference kidsActivityRef = kidsDb.collection(\"users\").document(mAuth.getCurrentUser().getUid())\r\n                .collection(\"kids\").document(kids_id).collection(\"grades\").document(grade).collection(\"test\");\r\n\r\n        kidsActivityRef.get().addOnCompleteListener(new OnCompleteListener<QuerySnapshot>() {\r\n            @Override\r\n            public void onComplete(@NonNull Task<QuerySnapshot> task) {\r\n                if (task.isSuccessful()) {\r\n                    Log.d(\"TAG\", \"onComplete:Firebase Update \");\r\n                    for (QueryDocumentSnapshot document : task.getResult()) {\r\n\r\n                        KidsActivity kidsActivity = document.toObject(KidsActivity.class);\r\n\r\n\r\n                        if (kidsActivity.getStatus().equals(\"pass\")) {\r\n\r\n                            try {\r\n                                if (!document.getId().split(\"_\")[1].equals(\"multiplication\")) {\r\n                                    Log.i(\"doc_id\", document.getId().replace(\" \", \"\").split(\"_\")[1]);\r\n                                    UtilityFunctions.updateDbUnlock(database, document.getId().replace(\" \", \"\").split(\"_\")[1], document.getId().split(\"_\")[2],true);\r\n                                } else {\r\n                                    Log.i(\"doc_id\", document.getId().replace(\" \", \"\").split(\"_\")[2].split(\"\\\\(\")[1].split(\"\")[0]);\r\n                                    int maxVal = Integer.parseInt(document.getId().replace(\" \", \"\").split(\"_\")[2].split(\"\\\\(\")[1].split(\"\")[0]);\r\n                                    if (PrefConfig.readIntInPref(context, context.getResources().getString(R.string.multiplication_upto)) < maxVal) {\r\n                                        PrefConfig.writeIntInPref(context, maxVal, context.getResources().getString(R.string.multiplication_upto));\r\n                                    }\r\n\r\n                                }\r\n                            } catch (Exception e) {\r\n                            }\r\n\r\n\r\n                        }\r\n                    }\r\n\r\n                    callback.dataUpdated();\r\n                } else {\r\n                    Log.d(\"TAG\", \"Error getting documents: \", task.getException());\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    public interface Callback {\r\n        public void dataUpdated();\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/maths/beyond_school_280720220930/firebase/CallFirebaseForInfo.java b/app/src/main/java/com/maths/beyond_school_280720220930/firebase/CallFirebaseForInfo.java
--- a/app/src/main/java/com/maths/beyond_school_280720220930/firebase/CallFirebaseForInfo.java	(revision 7a276194d708deddf726aad7126afc97f2f4da50)
+++ b/app/src/main/java/com/maths/beyond_school_280720220930/firebase/CallFirebaseForInfo.java	(date 1668836290382)
@@ -204,7 +204,7 @@
 
     }
 
-    public static void setSubscriptionId(FirebaseFirestore firebaseFirestore, FirebaseAuth mAuth, String subscriptionId, String plan_id, String customerId, int planValue, int trialPeriod,Context context) {
+    public static void setSubscriptionId(FirebaseFirestore firebaseFirestore, FirebaseAuth mAuth, String subscriptionId, String plan_id, String customerId, int planValue, int trialPeriod,Context context,Callback callback) {
 
 
         Date date=new Date();
@@ -227,12 +227,14 @@
 
 
                 Log.d(TAG, "onComplete: added");
+                callback.dataUpdated();
 
             }
         }).addOnFailureListener(new OnFailureListener() {
             @Override
             public void onFailure(@NonNull Exception e) {
                 Log.d(TAG, "onFailure: ");
+                callback.dataUpdated();
             }
         });
 
Index: app/src/main/java/com/maths/beyond_school_280720220930/ViewCurriculum.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.maths.beyond_school_280720220930;\r\n\r\n\r\nimport static com.maths.beyond_school_280720220930.utils.Constants.EXTRA_CATEGORY_ID;\r\nimport static com.maths.beyond_school_280720220930.utils.Constants.EXTRA_DATA;\r\nimport static com.maths.beyond_school_280720220930.utils.Constants.EXTRA_FLAG_HAVE_DATA;\r\nimport static com.maths.beyond_school_280720220930.utils.Constants.EXTRA_GRAMMAR_CATEGORY;\r\nimport static com.maths.beyond_school_280720220930.utils.Constants.EXTRA_IS_OPEN_FROM_LEARN;\r\nimport static com.maths.beyond_school_280720220930.utils.Constants.EXTRA_ONLINE_FLAG;\r\nimport static com.maths.beyond_school_280720220930.utils.Constants.EXTRA_OPEN_TYPE;\r\nimport static com.maths.beyond_school_280720220930.utils.Constants.EXTRA_SPELLING_DETAIL;\r\nimport static com.maths.beyond_school_280720220930.utils.Constants.EXTRA_TITLE;\r\nimport static com.maths.beyond_school_280720220930.utils.Constants.EXTRA_VOCABULARY_CATEGORY;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.RadioButton;\r\nimport android.widget.RadioGroup;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.content.res.ResourcesCompat;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\n\r\nimport com.maths.beyond_school_280720220930.SP.PrefConfig;\r\nimport com.maths.beyond_school_280720220930.adapters.ChaptersRecyclerAdapter;\r\nimport com.maths.beyond_school_280720220930.adapters.LevelTwoContentAdapter;\r\nimport com.maths.beyond_school_280720220930.database.grade_tables.GradeData;\r\nimport com.maths.beyond_school_280720220930.database.grade_tables.GradeDatabase;\r\nimport com.maths.beyond_school_280720220930.databinding.ActivityViewCurriculumBinding;\r\nimport com.maths.beyond_school_280720220930.english_activity.grammar.GrammarActivity;\r\n\r\nimport com.maths.beyond_school_280720220930.english_activity.grammar.test.GrammarTestActivity;\r\nimport com.maths.beyond_school_280720220930.english_activity.spelling.EnglishSpellingActivity;\r\nimport com.maths.beyond_school_280720220930.english_activity.spelling.spelling_test.SpellingTest;\r\nimport com.maths.beyond_school_280720220930.english_activity.vocabulary.EnglishActivity;\r\nimport com.maths.beyond_school_280720220930.english_activity.vocabulary.practice.EnglishVocabularyPracticeActivity;\r\nimport com.maths.beyond_school_280720220930.retrofit.ApiClient;\r\nimport com.maths.beyond_school_280720220930.retrofit.ApiClientContent;\r\nimport com.maths.beyond_school_280720220930.retrofit.ApiInterface;\r\nimport com.maths.beyond_school_280720220930.retrofit.ApiInterfaceContent;\r\nimport com.maths.beyond_school_280720220930.retrofit.model.content_new.ContentModelNew;\r\nimport com.maths.beyond_school_280720220930.retrofit.model.grade.GradeModel;\r\nimport com.maths.beyond_school_280720220930.utils.Constants;\r\nimport com.maths.beyond_school_280720220930.utils.ScreenType;\r\nimport com.maths.beyond_school_280720220930.utils.UtilityFunctions;\r\nimport com.maths.beyond_school_280720220930.utils.typeconverters.GradeConverter;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Date;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\n\r\nimport retrofit2.Call;\r\nimport retrofit2.Callback;\r\nimport retrofit2.Response;\r\nimport retrofit2.Retrofit;\r\n\r\npublic class ViewCurriculum extends AppCompatActivity {\r\n\r\n    private static final String TAG = \"ViewCurriculum\";\r\n    private GradeDatabase gradeDatabase;\r\n    private ActivityViewCurriculumBinding binding;\r\n    private ChaptersRecyclerAdapter chaptersRecyclerAdapter;\r\n    private String[] eng;\r\n    private List<String> engChapters;\r\n    private String defaultSubject = \"\";\r\n    private String kidsGrade = \"\";\r\n    private int noOfDays = 0;\r\n    private String paymentStatus;\r\n    private int trialPeriodDay = 1;\r\n    private int paymentAmount = 0;\r\n    private List<String> subSubjects;\r\n    private List<List<GradeData>> subSubjectList;\r\n    private String createAt=\"\";\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        binding = ActivityViewCurriculumBinding.inflate(getLayoutInflater());\r\n        setContentView(binding.getRoot());\r\n        gradeDatabase = GradeDatabase.getDbInstance(this);\r\n        kidsGrade = PrefConfig.readIdInPref(getApplicationContext(), getResources().getString(R.string.kids_grade)).toLowerCase(Locale.ROOT);\r\n\r\n        subSubjectList = new ArrayList<>();\r\n        subSubjects = new ArrayList<>();\r\n        eng = gradeDatabase.gradesDaoUpdated().getChapterNames();\r\n        binding.gradeInfo.setText(\"For \" + kidsGrade.substring(0, 1).toUpperCase() + kidsGrade.substring(1));\r\n\r\n        noOfDays = PrefConfig.readIntInPref(ViewCurriculum.this, getResources().getString(R.string.noOfdays), 0);\r\n        trialPeriodDay = PrefConfig.readIntInPref(ViewCurriculum.this, getResources().getString(R.string.trial_period), 0);\r\n        paymentStatus = PrefConfig.readIdInPref(ViewCurriculum.this, getResources().getString(R.string.payment_status));\r\n        paymentAmount = PrefConfig.readIntDInPref(ViewCurriculum.this, getResources().getString(R.string.plan_value));\r\n        createAt=PrefConfig.readIdInPref(ViewCurriculum.this,getResources().getString(R.string.created_at));\r\n        try {\r\n            engChapters = Arrays.asList(eng);\r\n            defaultSubject = eng[0];\r\n        } catch (Exception e) {\r\n        }\r\n\r\n\r\n        try {\r\n            defaultSubject = getIntent().getStringExtra(\"subSubject\");\r\n            Log.d(TAG, \"onCreate: \" + defaultSubject + \",\" + Arrays.binarySearch(eng, defaultSubject) + \",\" + eng[1] + \",\" + eng[0]);\r\n        } catch (Exception e) {\r\n            defaultSubject = eng[0];\r\n        }\r\n\r\n        addRadioButtons();\r\n        // TODO: Radio group should be dynamic\r\n        binding.radioGroup.setOnCheckedChangeListener((group, checkedId) -> {\r\n            RadioButton checkedRadioButton = (RadioButton) group.findViewById(checkedId);\r\n            boolean isChecked = checkedRadioButton.isChecked();\r\n            if (isChecked) {\r\n                //setRecyclerViewData(checkedRadioButton.getText().toString().trim());\r\n                setRecyclerView(checkedRadioButton.getText().toString().trim());\r\n            }\r\n        });\r\n\r\n        binding.buttonLayout.setOnClickListener(v -> {\r\n            startActivity(new Intent(getApplicationContext(), TabbedHomePage.class));\r\n            finish();\r\n        });\r\n\r\n        //  getNewData();\r\n    }\r\n\r\n\r\n    public void addRadioButtons() {\r\n        binding.radioGroup.setOrientation(LinearLayout.HORIZONTAL);\r\n        //\r\n\r\n\r\n        for (String st : eng) {\r\n            RadioButton rdbtn = new RadioButton(this);\r\n            RadioGroup.LayoutParams params = new RadioGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);\r\n            params.setMargins(10, 15, 10, 15);\r\n            rdbtn.setLayoutParams(params);\r\n            rdbtn.setPadding(15, 20, 15, 20);\r\n            rdbtn.setTypeface(ResourcesCompat.getFont(this, R.font.jellee_roman));\r\n            rdbtn.setTextColor(getResources().getColor(R.color.primary));\r\n            rdbtn.setId(engChapters.indexOf(st));\r\n            rdbtn.setText(st);\r\n            rdbtn.setButtonDrawable(R.color.transparent);\r\n            rdbtn.setBackgroundResource(R.drawable.radio_selector);\r\n            binding.radioGroup.addView(rdbtn);\r\n            rdbtn.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    ((RadioGroup) view.getParent()).check(view.getId());\r\n\r\n                }\r\n            });\r\n        }\r\n\r\n        // setRecyclerViewData(defaultSubject);\r\n        setRecyclerView(defaultSubject);\r\n        ((RadioButton) binding.radioGroup.getChildAt(engChapters.indexOf(defaultSubject))).setChecked(true);\r\n    }\r\n\r\n\r\n    private void getNewData() {\r\n        Retrofit retrofit = ApiClient.getClient();\r\n        var api = retrofit.create(ApiInterface.class);\r\n        api.getGradeData(PrefConfig.readIdInPref(this, getResources().getString(R.string.kids_grade)).toLowerCase().replace(\" \", \"\")).enqueue(new retrofit2.Callback<>() {\r\n\r\n\r\n            @Override\r\n            public void onResponse(@NonNull retrofit2.Call<GradeModel> call, @NonNull retrofit2.Response<GradeModel> response) {\r\n                if (response.body() != null) {\r\n\r\n                    Log.d(TAG, \"onResponse: \" + response.code());\r\n                    Log.d(TAG, \"onResponse: \" + response.body().getEnglish().toString());\r\n                    var list = response.body().getEnglish();\r\n                    mapToGradeModel(list);\r\n                } else {\r\n                    Toast.makeText(ViewCurriculum.this, \"Something wrong occurs\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onFailure(retrofit2.Call<com.maths.beyond_school_280720220930.retrofit.model.grade.GradeModel> call, Throwable t) {\r\n                Log.e(TAG, \"onFailure: \" + t.getLocalizedMessage());\r\n            }\r\n        });\r\n    }\r\n//\r\n\r\n\r\n    //New method added\r\n    private void setRecyclerView(String subject) {\r\n\r\n        subSubjects.clear();\r\n        subSubjectList.clear();\r\n        var db = gradeDatabase.gradesDaoUpdated();\r\n        subSubjects = db.getSubSubjects(subject);\r\n        for (String subSubject : subSubjects) {\r\n            subSubjectList.add(db.getDataFromSubject(subject, subSubject));\r\n            Log.d(TAG, \"setRecyclerView: +\" + subSubjectList);\r\n        }\r\n\r\n\r\n        var adapter = new LevelTwoContentAdapter(ViewCurriculum.this);\r\n        binding.contentRecyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n        binding.contentRecyclerView.setAdapter(adapter);\r\n        adapter.setNotesList(subSubjects, subSubjectList);\r\n        adapter.setOnItemGradeClickListener(this::navigateToNextScreen);\r\n\r\n    }\r\n\r\n    private void navigateToNextScreen(GradeData gradeData, Boolean isLearn) {\r\n\r\n\r\n        if (paymentStatus.equals(\"active\")){\r\n\r\n            if (gradeData.isUnlock()) {\r\n\r\n            var a = ApiClientContent.getClient().create(ApiInterfaceContent.class);\r\n            a.getData(gradeData.getId(), gradeData.getSub_subject_id()).enqueue(new Callback<ContentModelNew>() {\r\n                @Override\r\n                public void onResponse(@NonNull Call<ContentModelNew> call, @NonNull Response<ContentModelNew> response) {\r\n                    if (response.body() != null) {\r\n                        handleResponse(response.body(), gradeData, isLearn);\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public void onFailure(@NonNull Call<ContentModelNew> call, @NonNull Throwable t) {\r\n                    Log.d(\"AAA\", \"onFailure: \" + t.getLocalizedMessage());\r\n                }\r\n            });}\r\n            else{\r\n                UtilityFunctions.displayCustomDialog(ViewCurriculum.this, \"Chapter Locked\", \"Hey, Please complete previous level to unlock.\");\r\n            }\r\n\r\n\r\n        }else{\r\n\r\n\r\n            //TODO: replace with date diff\r\n            if (UtilityFunctions.diffDate(createAt,new Date().toString()) < trialPeriodDay) {\r\n                if (gradeData.isUnlock()) {\r\n                    var a = ApiClientContent.getClient().create(ApiInterfaceContent.class);\r\n                    a.getData(gradeData.getId(), gradeData.getSub_subject_id()).enqueue(new Callback<ContentModelNew>() {\r\n                        @Override\r\n                        public void onResponse(@NonNull Call<ContentModelNew> call, @NonNull Response<ContentModelNew> response) {\r\n                            if (response.body() != null) {\r\n                                handleResponse(response.body(), gradeData, isLearn);\r\n                            }\r\n                        }\r\n\r\n                        @Override\r\n                        public void onFailure(@NonNull Call<ContentModelNew> call, @NonNull Throwable t) {\r\n                            Log.d(\"AAA\", \"onFailure: \" + t.getLocalizedMessage());\r\n                        }\r\n                    });\r\n                }else {\r\n\r\n                    UtilityFunctions.displayCustomDialog(ViewCurriculum.this, \"Chapter Locked\", \"Hey, Please complete previous level to unlock.\");\r\n                }\r\n\r\n\r\n            }else {\r\n                UtilityFunctions.displayCustomDialogSubscribe(ViewCurriculum.this, \"Subscribe\", \"Hey you don't have any subscription plan. Please subscribe to continue.\", \"Subscribe @ Rs \" + paymentAmount + \"/ Month\");\r\n            }\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    private void handleResponse(ContentModelNew body, GradeData gradeData, Boolean isLearn) {\r\n        ScreenType screenType;\r\n        try {\r\n            screenType = ScreenType.valueOf(body.getMeta().getScreen_type());\r\n        } catch (IllegalArgumentException e) {\r\n            Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();\r\n            return;\r\n        }\r\n        Intent intent;\r\n        Constants.OpenType openType;\r\n        switch (screenType) {\r\n            case LETTER_BY_LETTER: {\r\n                if (isLearn) {\r\n                    intent = new Intent(this, EnglishSpellingActivity.class);\r\n                    openType = Constants.OpenType.LEARNING;\r\n                } else {\r\n                    intent = new Intent(this, SpellingTest.class);\r\n                    openType = Constants.OpenType.EXERCISE;\r\n                }\r\n                intent.putExtra(EXTRA_SPELLING_DETAIL, gradeData.getChapter_name());\r\n            }\r\n            break;\r\n            case CHOSE_THE_CORRECT_WORD: {\r\n                if (isLearn) {\r\n                    intent = new Intent(this, GrammarActivity.class);\r\n                    openType = Constants.OpenType.LEARNING;\r\n                } else {\r\n                    intent = new Intent(this, GrammarTestActivity.class);\r\n                    openType = Constants.OpenType.EXERCISE;\r\n                }\r\n                intent.putExtra(EXTRA_GRAMMAR_CATEGORY, gradeData.getChapter_name());\r\n            }\r\n            break;\r\n            case WITH_STT: {\r\n                if (isLearn) {\r\n                    intent = new Intent(this, EnglishActivity.class);\r\n                    openType = Constants.OpenType.LEARNING;\r\n                } else {\r\n                    intent = new Intent(this, EnglishVocabularyPracticeActivity.class);\r\n                    openType = Constants.OpenType.EXERCISE;\r\n                }\r\n                intent.putExtra(EXTRA_VOCABULARY_CATEGORY, gradeData.getChapter_name());\r\n            }\r\n            break;\r\n            default:\r\n                Toast.makeText(this, \"No activity found for this screen type\", Toast.LENGTH_SHORT).show();\r\n                return;\r\n        }\r\n\r\n        Log.d(TAG, \"handleResponse: \"+openType);\r\n        intent.putExtra(EXTRA_OPEN_TYPE, openType.name()); //TODO : u can check weather is intent in learning or exercise\r\n        intent.putExtra(EXTRA_DATA, body);\r\n        intent.putExtra(EXTRA_FLAG_HAVE_DATA, true);\r\n        intent.putExtra(EXTRA_ONLINE_FLAG, true);\r\n        intent.putExtra(EXTRA_IS_OPEN_FROM_LEARN, false);\r\n        intent.putExtra(EXTRA_CATEGORY_ID, gradeData.getId());\r\n        intent.putExtra(EXTRA_TITLE, gradeData.getSubject());\r\n        startActivity(intent);\r\n    }\r\n\r\n    private void setRecyclerViewData(String subject) {\r\n\r\n        binding.contentRecyclerView.setLayoutManager(new LinearLayoutManager(getApplicationContext(), LinearLayoutManager.VERTICAL, false));\r\n        chaptersRecyclerAdapter = new ChaptersRecyclerAdapter(ViewCurriculum.this, gradeData -> {\r\n\r\n\r\n            if (paymentStatus.equals(\"active\")) {\r\n\r\n                if (gradeData.isUnlock()) {\r\n                    Intent intent;\r\n                    Log.d(TAG, \"setRecyclerViewData: \" + gradeData.getRequest());\r\n                    if (gradeData.getSubject().equals(\"Spelling_CommonWords\")) {\r\n                        intent = new Intent(this, EnglishSpellingActivity.class);\r\n                        intent.putExtra(EXTRA_SPELLING_DETAIL, gradeData.getChapter_name());\r\n                    } else {\r\n                        intent = new Intent(this, GrammarActivity.class);\r\n                        intent.putExtra(EXTRA_GRAMMAR_CATEGORY, gradeData.getChapter_name());\r\n                    }\r\n                    intent.putExtra(EXTRA_ONLINE_FLAG, true);\r\n                    intent.putExtra(EXTRA_CATEGORY_ID, gradeData.getId());\r\n                    intent.putExtra(EXTRA_TITLE, gradeData.getSubject());\r\n                    startActivity(intent);\r\n\r\n                } else {\r\n\r\n                    UtilityFunctions.displayCustomDialog(ViewCurriculum.this, \"Chapter Locked\", \"Hey, Please complete previous level to unlock.\");\r\n                }\r\n            } else {\r\n\r\n                if (noOfDays < trialPeriodDay) {\r\n\r\n                    if (gradeData.isUnlock()) {\r\n                        Intent intent;\r\n                        Log.d(TAG, \"setRecyclerViewData: \" + gradeData.getRequest());\r\n                        if (gradeData.getSubject().equals(\"Spelling_CommonWords\")) {\r\n                            intent = new Intent(this, EnglishSpellingActivity.class);\r\n                            intent.putExtra(EXTRA_SPELLING_DETAIL, gradeData.getChapter_name());\r\n                        } else {\r\n                            intent = new Intent(this, GrammarActivity.class);\r\n                            intent.putExtra(EXTRA_GRAMMAR_CATEGORY, gradeData.getChapter_name());\r\n                        }\r\n                        intent.putExtra(EXTRA_ONLINE_FLAG, true);\r\n                        intent.putExtra(EXTRA_CATEGORY_ID, gradeData.getId());\r\n                        intent.putExtra(EXTRA_TITLE, gradeData.getSubject());\r\n                        startActivity(intent);\r\n\r\n                    } else {\r\n\r\n                        UtilityFunctions.displayCustomDialog(ViewCurriculum.this, \"Chapter Locked\", \"Hey, Please complete previous level to unlock.\");\r\n                    }\r\n                } else {\r\n\r\n                    UtilityFunctions.displayCustomDialogSubscribe(ViewCurriculum.this, \"Subscribe\", \"Hey you don't have any subscription plan. Please subscribe to continue.\", \"Subscribe @ Rs \" + paymentAmount + \"/ Month\");\r\n                }\r\n            }\r\n\r\n        });\r\n        binding.contentRecyclerView.setAdapter(chaptersRecyclerAdapter);\r\n        getLiveData(subject);\r\n    }\r\n\r\n    private void displaySubscriptionDialog() {\r\n\r\n    }\r\n\r\n    private void getLiveData(String subject) {\r\n        gradeDatabase.gradesDaoUpdated().getSubjectData(subject).observe(this, gradeData -> {\r\n            chaptersRecyclerAdapter.submitList(gradeData);\r\n            if (gradeData.size() == 0) binding.noDataLayout.setVisibility(View.VISIBLE);\r\n            else binding.noDataLayout.setVisibility(View.GONE);\r\n        });\r\n    }\r\n\r\n    private void mapToGradeModel(List<GradeModel.EnglishModel> list) {\r\n        list.forEach(subject -> {\r\n            var mapper = new GradeConverter(subject.getSubject());\r\n            var chapterList = mapper.mapToList(subject.getChapters());\r\n            // gradeDatabase.gradesDaoUpdated().insertNotes(chapterList);\r\n        });\r\n    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/maths/beyond_school_280720220930/ViewCurriculum.java b/app/src/main/java/com/maths/beyond_school_280720220930/ViewCurriculum.java
--- a/app/src/main/java/com/maths/beyond_school_280720220930/ViewCurriculum.java	(revision 7a276194d708deddf726aad7126afc97f2f4da50)
+++ b/app/src/main/java/com/maths/beyond_school_280720220930/ViewCurriculum.java	(date 1668835294933)
@@ -40,6 +40,7 @@
 import com.maths.beyond_school_280720220930.english_activity.spelling.spelling_test.SpellingTest;
 import com.maths.beyond_school_280720220930.english_activity.vocabulary.EnglishActivity;
 import com.maths.beyond_school_280720220930.english_activity.vocabulary.practice.EnglishVocabularyPracticeActivity;
+import com.maths.beyond_school_280720220930.extras.CustomProgressDialogue;
 import com.maths.beyond_school_280720220930.retrofit.ApiClient;
 import com.maths.beyond_school_280720220930.retrofit.ApiClientContent;
 import com.maths.beyond_school_280720220930.retrofit.ApiInterface;
@@ -79,6 +80,7 @@
     private List<String> subSubjects;
     private List<List<GradeData>> subSubjectList;
     private String createAt="";
+    private CustomProgressDialogue customProgressDialogue;
 
     @Override
     protected void onCreate(Bundle savedInstanceState) {
@@ -88,6 +90,7 @@
         setContentView(binding.getRoot());
         gradeDatabase = GradeDatabase.getDbInstance(this);
         kidsGrade = PrefConfig.readIdInPref(getApplicationContext(), getResources().getString(R.string.kids_grade)).toLowerCase(Locale.ROOT);
+        customProgressDialogue=new CustomProgressDialogue(this);
 
         subSubjectList = new ArrayList<>();
         subSubjects = new ArrayList<>();
@@ -120,6 +123,7 @@
             boolean isChecked = checkedRadioButton.isChecked();
             if (isChecked) {
                 //setRecyclerViewData(checkedRadioButton.getText().toString().trim());
+                defaultSubject=checkedRadioButton.getText().toString().trim();
                 setRecyclerView(checkedRadioButton.getText().toString().trim());
             }
         });
@@ -218,9 +222,11 @@
     private void navigateToNextScreen(GradeData gradeData, Boolean isLearn) {
 
 
+
         if (paymentStatus.equals("active")){
 
             if (gradeData.isUnlock()) {
+                customProgressDialogue.show();
 
             var a = ApiClientContent.getClient().create(ApiInterfaceContent.class);
             a.getData(gradeData.getId(), gradeData.getSub_subject_id()).enqueue(new Callback<ContentModelNew>() {
@@ -228,12 +234,14 @@
                 public void onResponse(@NonNull Call<ContentModelNew> call, @NonNull Response<ContentModelNew> response) {
                     if (response.body() != null) {
                         handleResponse(response.body(), gradeData, isLearn);
+                        customProgressDialogue.dismiss();
                     }
                 }
 
                 @Override
                 public void onFailure(@NonNull Call<ContentModelNew> call, @NonNull Throwable t) {
                     Log.d("AAA", "onFailure: " + t.getLocalizedMessage());
+                    customProgressDialogue.dismiss();
                 }
             });}
             else{
@@ -247,18 +255,21 @@
             //TODO: replace with date diff
             if (UtilityFunctions.diffDate(createAt,new Date().toString()) < trialPeriodDay) {
                 if (gradeData.isUnlock()) {
+                    customProgressDialogue.show();
                     var a = ApiClientContent.getClient().create(ApiInterfaceContent.class);
                     a.getData(gradeData.getId(), gradeData.getSub_subject_id()).enqueue(new Callback<ContentModelNew>() {
                         @Override
                         public void onResponse(@NonNull Call<ContentModelNew> call, @NonNull Response<ContentModelNew> response) {
                             if (response.body() != null) {
                                 handleResponse(response.body(), gradeData, isLearn);
+                                customProgressDialogue.dismiss();
                             }
                         }
 
                         @Override
                         public void onFailure(@NonNull Call<ContentModelNew> call, @NonNull Throwable t) {
                             Log.d("AAA", "onFailure: " + t.getLocalizedMessage());
+                            customProgressDialogue.dismiss();
                         }
                     });
                 }else {
@@ -401,6 +412,13 @@
 
     }
 
+    @Override
+    protected void onResume() {
+        super.onResume();
+
+        setRecyclerView(defaultSubject);
+    }
+
     private void getLiveData(String subject) {
         gradeDatabase.gradesDaoUpdated().getSubjectData(subject).observe(this, gradeData -> {
             chaptersRecyclerAdapter.submitList(gradeData);
Index: app/src/main/java/com/maths/beyond_school_280720220930/TabbedHomePage.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.maths.beyond_school_280720220930;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.ActionBarDrawerToggle;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.Manifest;\r\nimport android.annotation.SuppressLint;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.Gravity;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.material.bottomsheet.BottomSheetBehavior;\r\nimport com.google.android.material.navigation.NavigationView;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.remoteconfig.FirebaseRemoteConfig;\r\nimport com.google.firebase.remoteconfig.FirebaseRemoteConfigSettings;\r\nimport com.maths.beyond_school_280720220930.SP.PrefConfig;\r\nimport com.maths.beyond_school_280720220930.databinding.ActivityTabbedHomePageBinding;\r\nimport com.maths.beyond_school_280720220930.databinding.RowBinding;\r\nimport com.maths.beyond_school_280720220930.firebase.CallFirebaseForInfo;\r\nimport com.maths.beyond_school_280720220930.fragments.MyAdapter;\r\nimport com.maths.beyond_school_280720220930.payments.FetchSubscriptionStatus;\r\nimport com.maths.beyond_school_280720220930.utils.UtilityFunctions;\r\nimport com.razorpay.Subscription;\r\n\r\nimport java.util.Date;\r\nimport java.util.concurrent.ExecutionException;\r\n\r\npublic class TabbedHomePage extends AppCompatActivity implements NavigationView.OnNavigationItemSelectedListener {\r\n\r\n\r\n    private ActivityTabbedHomePageBinding binding;\r\n    ActionBarDrawerToggle toggle;\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseUser mCurrentUser;\r\n    private BottomSheetBehavior mBottomSheetBehavior;\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private int REQUEST_RECORD_AUDIO = 1;\r\n    private FirebaseRemoteConfig mFirebaseRemoteConfig;\r\n    private final static String TAG = \"TabbedHomeScreen\";\r\n    private Subscription subscription;\r\n    private String subscriptionId = \"\";\r\n    private String createAt;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        binding = ActivityTabbedHomePageBinding.inflate(getLayoutInflater());\r\n\r\n        setContentView(binding.getRoot());\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n        firebaseFirestore = FirebaseFirestore.getInstance();\r\n        mCurrentUser = mAuth.getCurrentUser();\r\n\r\n        subscriptionId = PrefConfig.readIdInPref(TabbedHomePage.this, getResources().getString(R.string.subscription_id));\r\n\r\n        if (PrefConfig.readIdInPref(TabbedHomePage.this, getResources().getString(R.string.plan_id)).equals(\"\"))\r\n            setUpRemoteConfigPayment();\r\n        createAt=PrefConfig.readIdInPref(this,getResources().getString(R.string.created_at));\r\n\r\n        binding.tabLayout.addTab(binding.tabLayout.newTab().setText(\"English\"));\r\n        binding.tabLayout.addTab(binding.tabLayout.newTab().setText(\"Math\"));\r\n        mBottomSheetBehavior = BottomSheetBehavior.from(binding.extLayout.permissionCard);\r\n        binding.tabLayout.setTabGravity(TabLayout.GRAVITY_FILL);\r\n        final MyAdapter adapter = new MyAdapter(this, getSupportFragmentManager(), binding.tabLayout.getTabCount());\r\n        binding.viewPager.setAdapter(adapter);\r\n        binding.viewPager.addOnPageChangeListener(new TabLayout.TabLayoutOnPageChangeListener(binding.tabLayout));\r\n        binding.tabLayout.addOnTabSelectedListener(new TabLayout.OnTabSelectedListener() {\r\n            @Override\r\n            public void onTabSelected(TabLayout.Tab tab) {\r\n                binding.viewPager.setCurrentItem(tab.getPosition());\r\n            }\r\n\r\n            @Override\r\n            public void onTabUnselected(TabLayout.Tab tab) {\r\n            }\r\n\r\n            @Override\r\n            public void onTabReselected(TabLayout.Tab tab) {\r\n            }\r\n        });\r\n        checkAudioPermission();\r\n\r\n        setUiElements();\r\n        loadImage();\r\n\r\n    }\r\n\r\n    private void loadImage() {\r\n        UtilityFunctions.loadImage(PrefConfig.readIdInPref(getApplicationContext(), getResources().getString(R.string.kids_profile_url)),\r\n                binding.tool.toolBar.imageView6);\r\n    }\r\n\r\n\r\n    private void setUpRemoteConfigPayment() {\r\n        mFirebaseRemoteConfig = FirebaseRemoteConfig.getInstance();\r\n        FirebaseRemoteConfigSettings configSettings = new FirebaseRemoteConfigSettings.Builder()\r\n                .setMinimumFetchIntervalInSeconds(0)\r\n                .build();\r\n        mFirebaseRemoteConfig.setDefaultsAsync(R.xml.data_updated_default_value);\r\n        mFirebaseRemoteConfig.setConfigSettingsAsync(configSettings);\r\n\r\n        mFirebaseRemoteConfig.fetchAndActivate()\r\n                .addOnCompleteListener(this, task -> {\r\n                    if (task.isSuccessful()) {\r\n                        boolean updated = task.getResult();\r\n\r\n                        int val = (int) mFirebaseRemoteConfig.getLong(\"price_value\");\r\n                        PrefConfig.writeIntInPref(TabbedHomePage.this, val, getResources().getString(R.string.plan_value));\r\n                        PrefConfig.writeIdInPref(TabbedHomePage.this, UtilityFunctions.getPlanIds(val), getResources().getString(R.string.plan_id));\r\n\r\n                        if (PrefConfig.readIntInPref(TabbedHomePage.this, getResources().getString(R.string.trial_period), 0) == 0)\r\n                            setUpRemoteConfigTrial(val);\r\n\r\n                        Log.d(TAG, \"Config params updated: payment\" + updated + \", val:\" + val);\r\n                        return;\r\n                    }\r\n                    // Toast.makeText(SplashScreen.this, \"Fetch failed\", Toast.LENGTH_SHORT).show();\r\n                    Log.d(TAG, \"Config params updated: \" + \"Fetch failed\");\r\n                });\r\n\r\n    }\r\n\r\n\r\n    private void setUpRemoteConfigTrial(int planVal) {\r\n        mFirebaseRemoteConfig = FirebaseRemoteConfig.getInstance();\r\n        FirebaseRemoteConfigSettings configSettings = new FirebaseRemoteConfigSettings.Builder()\r\n                .setMinimumFetchIntervalInSeconds(0)\r\n                .build();\r\n        mFirebaseRemoteConfig.setDefaultsAsync(R.xml.data_updated_default_value);\r\n        mFirebaseRemoteConfig.setConfigSettingsAsync(configSettings);\r\n\r\n        mFirebaseRemoteConfig.fetchAndActivate()\r\n                .addOnCompleteListener(this, task -> {\r\n                    if (task.isSuccessful()) {\r\n                        boolean updated = task.getResult();\r\n\r\n                        int val = (int) mFirebaseRemoteConfig.getLong(\"trial_period\");\r\n                        PrefConfig.writeIntInPref(TabbedHomePage.this, val, getResources().getString(R.string.trial_period));\r\n\r\n                        CallFirebaseForInfo.setSubscriptionId(firebaseFirestore, mAuth, PrefConfig.readIdInPref(TabbedHomePage.this, getResources().getString(R.string.subscription_id)), UtilityFunctions.getPlanIds(planVal),\r\n                                PrefConfig.readIdInPref(TabbedHomePage.this, getResources().getString(R.string.customer_id))\r\n                                , planVal, val,this);\r\n\r\n                        Log.d(TAG, \"Config params updated: trial \" + updated + \", val:\" + val);\r\n                        return;\r\n                    }\r\n                    // Toast.makeText(SplashScreen.this, \"Fetch failed\", Toast.LENGTH_SHORT).show();\r\n                    Log.d(TAG, \"Config params updated: \" + \"Fetch failed\");\r\n                });\r\n\r\n    }\r\n\r\n    private void setUiElements() {\r\n\r\n        binding.tool.toolBar.kidsName.setText(\"Hi ,\" + PrefConfig.readIdInPref(getApplicationContext(), getResources().getString(R.string.kids_name)));\r\n        binding.tool.toolBar.kidsAge.setText(UtilityFunctions.calculateAge(PrefConfig.readIdInPref(getApplicationContext(), getResources().getString(R.string.kids_dob))) + \" years old\");\r\n\r\n        Log.i(\"ImageUrl\", PrefConfig.readIdInPref(getApplicationContext(), getResources().getString(R.string.kids_profile_url)));\r\n\r\n        binding.tool.logoutLayout.setVisibility(View.VISIBLE);\r\n\r\n        int trialPeriod = PrefConfig.readIntInPref(TabbedHomePage.this, getResources().getString(R.string.trial_period), 0);\r\n        int noOfDays = PrefConfig.readIntInPref(TabbedHomePage.this, getResources().getString(R.string.noOfdays), 0);\r\n        if(PrefConfig.readIdInPref(TabbedHomePage.this, getResources().getString(R.string.payment_status)).equals(\"active\"))\r\n        binding.tool.toolBar.subscriptionStatus.setText(\"Your plan is activated\");\r\n        else if ((trialPeriod - UtilityFunctions.diffDate(createAt,new Date().toString())) == trialPeriod - 1)\r\n            binding.tool.toolBar.subscriptionStatus.setText(\"Your trial period ends today \");\r\n        else if (UtilityFunctions.diffDate(createAt,new Date().toString()) < trialPeriod)\r\n            binding.tool.toolBar.subscriptionStatus.setText(\"Your trial period ends in \" + (trialPeriod - UtilityFunctions.diffDate(createAt,new Date().toString())) + \" days\");\r\n        else if (!PrefConfig.readIdInPref(TabbedHomePage.this, getResources().getString(R.string.payment_status)).equals(\"active\"))\r\n            binding.tool.toolBar.subscriptionStatus.setText(\"You don't have any valid plans\");\r\n\r\n\r\n        binding.tool.logout.setOnClickListener(v -> {\r\n            mAuth.signOut();\r\n            mCurrentUser = null;\r\n            PrefConfig.writeIdInPref(getApplicationContext(), \"\", getResources().getString(R.string.kids_id));\r\n            Intent intent = new Intent(getApplicationContext(), SplashScreen.class);\r\n            startActivity(intent);\r\n            finish();\r\n        });\r\n\r\n        toggle = new ActionBarDrawerToggle(this, binding.drawerLayout, null, R.string.start, R.string.close);\r\n        binding.drawerLayout.addDrawerListener(toggle);\r\n        toggle.syncState();\r\n\r\n        //Objects.requireNonNull(getSupportActionBar()).setDisplayHomeAsUpEnabled(true);\r\n\r\n        binding.navigationView.setNavigationItemSelectedListener(this);\r\n        binding.appLogo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                //finish();\r\n                try {\r\n                    binding.drawerLayout.openDrawer(Gravity.LEFT);\r\n\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                    Toast.makeText(getApplicationContext(), \"\" + e.toString(), Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n        binding.tool.toolBar.gotoKidsInfo.setOnClickListener(v -> {\r\n\r\n            Intent intent = new Intent(getApplicationContext(), KidsInfoActivity.class);\r\n            intent.putExtra(\"type\", \"update\");\r\n            startActivity(intent);\r\n            // binding.drawerLayout.closeDrawer(Gravity.LEFT);\r\n\r\n\r\n        });\r\n\r\n        binding.tool.manageSubscription.setOnClickListener(v -> {\r\n            startActivity(new Intent(getApplicationContext(), ManageSubscription.class));\r\n        });\r\n\r\n\r\n        findViewById(R.id.dash).setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startActivity(new Intent(getApplicationContext(), DashBoardActivity.class));\r\n                binding.drawerLayout.closeDrawer(Gravity.LEFT);\r\n            }\r\n        });\r\n\r\n        findViewById(R.id.closeButton).setOnClickListener(v -> {\r\n            binding.drawerLayout.closeDrawer(Gravity.LEFT);\r\n        });\r\n        findViewById(R.id.home).setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startActivity(new Intent(getApplicationContext(), MainActivity.class));\r\n                binding.drawerLayout.closeDrawer(Gravity.LEFT);\r\n                finish();\r\n            }\r\n        });\r\n\r\n\r\n//        binding.tool.toolBar.imageCardView.setOnClickListener(v -> {\r\n//            binding.drawerLayout.closeDrawer(Gravity.LEFT);\r\n//        });\r\n\r\n        binding.tool.dash.setVisibility(View.GONE);\r\n\r\n        findViewById(R.id.remind).setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startActivity(new Intent(getApplicationContext(), AlarmAtTime.class));\r\n                binding.drawerLayout.closeDrawer(Gravity.LEFT);\r\n            }\r\n        });\r\n\r\n        binding.tool.privacyPolicy.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                startActivity(new Intent(getApplicationContext(), PrivacyPolicy.class));\r\n                binding.drawerLayout.closeDrawer(Gravity.LEFT);\r\n            }\r\n        });\r\n        findViewById(R.id.settings).setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n\r\n                startActivity(new Intent(getApplicationContext(), SettingsActivity.class));\r\n                binding.drawerLayout.closeDrawer(Gravity.LEFT);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n    private void goToProfile(String type) {\r\n        Toast.makeText(this, \"XXX\", Toast.LENGTH_SHORT).show();\r\n        Intent intent = new Intent(getApplicationContext(), KidsInfoActivity.class);\r\n        intent.putExtra(\"type\", type);\r\n        startActivity(intent);\r\n\r\n    }\r\n\r\n    private void permissionPadController() {\r\n\r\n\r\n        if (mBottomSheetBehavior.getState() != BottomSheetBehavior.STATE_EXPANDED) {\r\n            mBottomSheetBehavior.setState(BottomSheetBehavior.STATE_EXPANDED);\r\n\r\n        } else {\r\n            mBottomSheetBehavior.setState(BottomSheetBehavior.STATE_COLLAPSED);\r\n        }\r\n\r\n        binding.extLayout.acceptPermission.setOnClickListener(v -> {\r\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.RECORD_AUDIO}, REQUEST_RECORD_AUDIO);\r\n            mBottomSheetBehavior.setState(BottomSheetBehavior.STATE_COLLAPSED);\r\n        });\r\n        binding.extLayout.rejectPermission.setOnClickListener(v -> {\r\n            completeClose();\r\n        });\r\n        // doing some stuffs when bottom sheet is opening or closing like roatting button icon............................\r\n        mBottomSheetBehavior.addBottomSheetCallback(new BottomSheetBehavior.BottomSheetCallback() {\r\n            @Override\r\n            public void onStateChanged(@NonNull View bottomSheet, int newState) {\r\n\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onSlide(@NonNull View bottomSheet, float slideOffset) {\r\n\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    private void checkAudioPermission() {\r\n        // M = 23\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.RECORD_AUDIO) != PackageManager.PERMISSION_GRANTED) {\r\n            permissionPadController();\r\n        }\r\n    }\r\n\r\n\r\n    @SuppressLint(\"MissingSuperCall\")\r\n    public void onRequestPermissionsResult(int requestCode,\r\n                                           String permissions[], int[] grantResults) {\r\n\r\n        if (requestCode == REQUEST_RECORD_AUDIO) {\r\n\r\n            if (grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                startActivity(new Intent(getApplicationContext(), TabbedHomePage.class));\r\n                finish();\r\n            } else {\r\n                checkAudioPermission();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    private void completeClose() {\r\n        Intent a = new Intent(Intent.ACTION_MAIN);\r\n        a.addCategory(Intent.CATEGORY_HOME);\r\n        a.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n        startActivity(a);\r\n    }\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n\r\n        setUiElements();\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        super.onBackPressed();\r\n        completeClose();\r\n    }\r\n\r\n    @Override\r\n    public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n        return false;\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/maths/beyond_school_280720220930/TabbedHomePage.java b/app/src/main/java/com/maths/beyond_school_280720220930/TabbedHomePage.java
--- a/app/src/main/java/com/maths/beyond_school_280720220930/TabbedHomePage.java	(revision 7a276194d708deddf726aad7126afc97f2f4da50)
+++ b/app/src/main/java/com/maths/beyond_school_280720220930/TabbedHomePage.java	(date 1668836290368)
@@ -29,6 +29,7 @@
 import com.maths.beyond_school_280720220930.SP.PrefConfig;
 import com.maths.beyond_school_280720220930.databinding.ActivityTabbedHomePageBinding;
 import com.maths.beyond_school_280720220930.databinding.RowBinding;
+import com.maths.beyond_school_280720220930.extras.CustomProgressDialogue;
 import com.maths.beyond_school_280720220930.firebase.CallFirebaseForInfo;
 import com.maths.beyond_school_280720220930.fragments.MyAdapter;
 import com.maths.beyond_school_280720220930.payments.FetchSubscriptionStatus;
@@ -53,6 +54,7 @@
     private Subscription subscription;
     private String subscriptionId = "";
     private String createAt;
+    private CustomProgressDialogue customProgressDialogue;
 
     @Override
     protected void onCreate(Bundle savedInstanceState) {
@@ -65,12 +67,14 @@
         mAuth = FirebaseAuth.getInstance();
         firebaseFirestore = FirebaseFirestore.getInstance();
         mCurrentUser = mAuth.getCurrentUser();
+        customProgressDialogue = new CustomProgressDialogue(this);
 
         subscriptionId = PrefConfig.readIdInPref(TabbedHomePage.this, getResources().getString(R.string.subscription_id));
+        createAt = PrefConfig.readIdInPref(this, getResources().getString(R.string.created_at));
 
         if (PrefConfig.readIdInPref(TabbedHomePage.this, getResources().getString(R.string.plan_id)).equals(""))
             setUpRemoteConfigPayment();
-        createAt=PrefConfig.readIdInPref(this,getResources().getString(R.string.created_at));
+
 
         binding.tabLayout.addTab(binding.tabLayout.newTab().setText("English"));
         binding.tabLayout.addTab(binding.tabLayout.newTab().setText("Math"));
@@ -107,6 +111,7 @@
 
 
     private void setUpRemoteConfigPayment() {
+        customProgressDialogue.show();
         mFirebaseRemoteConfig = FirebaseRemoteConfig.getInstance();
         FirebaseRemoteConfigSettings configSettings = new FirebaseRemoteConfigSettings.Builder()
                 .setMinimumFetchIntervalInSeconds(0)
@@ -125,6 +130,8 @@
 
                         if (PrefConfig.readIntInPref(TabbedHomePage.this, getResources().getString(R.string.trial_period), 0) == 0)
                             setUpRemoteConfigTrial(val);
+                        else
+                            customProgressDialogue.dismiss();
 
                         Log.d(TAG, "Config params updated: payment" + updated + ", val:" + val);
                         return;
@@ -154,13 +161,17 @@
 
                         CallFirebaseForInfo.setSubscriptionId(firebaseFirestore, mAuth, PrefConfig.readIdInPref(TabbedHomePage.this, getResources().getString(R.string.subscription_id)), UtilityFunctions.getPlanIds(planVal),
                                 PrefConfig.readIdInPref(TabbedHomePage.this, getResources().getString(R.string.customer_id))
-                                , planVal, val,this);
+                                , planVal, val, this, () -> {
+                                    createAt = PrefConfig.readIdInPref(this, getResources().getString(R.string.created_at));
+                                    customProgressDialogue.dismiss();
+                                });
 
                         Log.d(TAG, "Config params updated: trial " + updated + ", val:" + val);
                         return;
                     }
                     // Toast.makeText(SplashScreen.this, "Fetch failed", Toast.LENGTH_SHORT).show();
                     Log.d(TAG, "Config params updated: " + "Fetch failed");
+                    customProgressDialogue.dismiss();
                 });
 
     }
@@ -176,12 +187,12 @@
 
         int trialPeriod = PrefConfig.readIntInPref(TabbedHomePage.this, getResources().getString(R.string.trial_period), 0);
         int noOfDays = PrefConfig.readIntInPref(TabbedHomePage.this, getResources().getString(R.string.noOfdays), 0);
-        if(PrefConfig.readIdInPref(TabbedHomePage.this, getResources().getString(R.string.payment_status)).equals("active"))
-        binding.tool.toolBar.subscriptionStatus.setText("Your plan is activated");
-        else if ((trialPeriod - UtilityFunctions.diffDate(createAt,new Date().toString())) == trialPeriod - 1)
+        if (PrefConfig.readIdInPref(TabbedHomePage.this, getResources().getString(R.string.payment_status)).equals("active"))
+            binding.tool.toolBar.subscriptionStatus.setText("Your plan is activated");
+        else if ((trialPeriod - UtilityFunctions.diffDate(createAt, new Date().toString())) == trialPeriod - 1)
             binding.tool.toolBar.subscriptionStatus.setText("Your trial period ends today ");
-        else if (UtilityFunctions.diffDate(createAt,new Date().toString()) < trialPeriod)
-            binding.tool.toolBar.subscriptionStatus.setText("Your trial period ends in " + (trialPeriod - UtilityFunctions.diffDate(createAt,new Date().toString())) + " days");
+        else if (UtilityFunctions.diffDate(createAt, new Date().toString()) < trialPeriod)
+            binding.tool.toolBar.subscriptionStatus.setText("Your trial period ends in " + (trialPeriod - UtilityFunctions.diffDate(createAt, new Date().toString())) + " days");
         else if (!PrefConfig.readIdInPref(TabbedHomePage.this, getResources().getString(R.string.payment_status)).equals("active"))
             binding.tool.toolBar.subscriptionStatus.setText("You don't have any valid plans");
 
Index: app/src/main/res/layout/activity_grammar_test.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\"\r\n    tools:context=\".english_activity.grammar.GrammarActivity\">\r\n\r\n\r\n    <include\r\n        android:id=\"@+id/toolBar\"\r\n        layout=\"@layout/tool_bar_layout_back_button\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_alignParentTop=\"true\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n\r\n    <TextView\r\n        android:id=\"@+id/text_view_category\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_below=\"@id/toolBar\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_marginTop=\"-10dp\"\r\n        android:fontFamily=\"@font/reemkufi_medium\"\r\n        android:gravity=\"center\"\r\n        android:textColor=\"@color/text_color\"\r\n        android:textSize=\"18sp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/toolBar\"\r\n        tools:text=\"Category : Personal\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/subSub\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_below=\"@id/text_view_category\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_marginTop=\"4dp\"\r\n        android:fontFamily=\"@font/reemkufi_medium\"\r\n        android:text=\"Test\"\r\n        android:textAllCaps=\"true\"\r\n        android:textColor=\"@color/primary\"\r\n        android:textSize=\"20sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/text_view_category\"\r\n        app:layout_constraintStart_toStartOf=\"@+id/text_view_category\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/text_view_category\"\r\n        tools:ignore=\"HardcodedText\" />\r\n\r\n    <include\r\n        android:id=\"@+id/layout_ext_timer\"\r\n        layout=\"@layout/layout_timer\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_below=\"@id/subSub\"\r\n        android:layout_alignParentEnd=\"true\"\r\n        android:layout_marginTop=\"4dp\"\r\n        android:layout_marginEnd=\"10dp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/subSub\" />\r\n\r\n    <androidx.viewpager2.widget.ViewPager2\r\n        android:id=\"@+id/view_pager_identifying_nouns\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"300dp\"\r\n        android:layout_marginTop=\"4dp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/layout_ext_timer\" />\r\n\r\n    <LinearLayout\r\n        android:id=\"@+id/linearLayout\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginHorizontal=\"@dimen/grid_1\"\r\n        android:orientation=\"horizontal\"\r\n        android:visibility=\"invisible\"\r\n        android:weightSum=\"4\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/view_pager_identifying_nouns\"\r\n        tools:visibility=\"visible\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/key_1\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginHorizontal=\"8dp\"\r\n            android:padding=\"@dimen/grid_10\"\r\n            android:layout_weight=\"1\"\r\n            android:background=\"@drawable/keys_button_background\"\r\n            android:backgroundTint=\"@color/primary\"\r\n            android:fontFamily=\"@font/jellee_roman\"\r\n            android:foreground=\"?attr/selectableItemBackground\"\r\n            android:gravity=\"center\"\r\n            android:textColor=\"@color/primary\"\r\n            android:textSize=\"12sp\"\r\n            android:textStyle=\"bold\"\r\n            app:elevation=\"0dp\"\r\n            android:textAllCaps=\"true\"\r\n            app:shapeAppearanceOverlay=\"@style/ShapeAppearanceOverlay.MyApp.Button.Rounded\"\r\n            tools:text=\"Common Noun\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/key_2\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginHorizontal=\"8dp\"\r\n            android:padding=\"@dimen/grid_10\"\r\n            android:layout_weight=\"1\"\r\n            android:background=\"@drawable/keys_button_background\"\r\n            android:backgroundTint=\"@color/primary\"\r\n            android:fontFamily=\"@font/jellee_roman\"\r\n            android:foreground=\"?attr/selectableItemBackground\"\r\n            android:gravity=\"center\"\r\n            android:textColor=\"@color/primary\"\r\n            android:textSize=\"12sp\"\r\n            android:textStyle=\"bold\"\r\n            app:elevation=\"0dp\"\r\n            android:textAllCaps=\"true\"\r\n            app:shapeAppearanceOverlay=\"@style/ShapeAppearanceOverlay.MyApp.Button.Rounded\"\r\n            tools:text=\"Proper Noun\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/key_3\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_weight=\"1\"\r\n            android:layout_marginHorizontal=\"8dp\"\r\n            android:padding=\"@dimen/grid_10\"\r\n            android:background=\"@drawable/keys_button_background\"\r\n            android:backgroundTint=\"@color/primary\"\r\n            android:fontFamily=\"@font/jellee_roman\"\r\n            android:gravity=\"center\"\r\n            android:textColor=\"@color/primary\"\r\n            android:textSize=\"12sp\"\r\n            android:textAllCaps=\"true\"\r\n            android:foreground=\"?attr/selectableItemBackground\"\r\n            android:textStyle=\"bold\"\r\n            app:elevation=\"0dp\"\r\n            app:shapeAppearanceOverlay=\"@style/ShapeAppearanceOverlay.MyApp.Button.Rounded\"\r\n            tools:text=\"Proper Noun\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/key_4\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_weight=\"1\"\r\n            android:background=\"@drawable/keys_button_background\"\r\n            android:backgroundTint=\"@color/primary\"\r\n            android:fontFamily=\"@font/jellee_roman\"\r\n            android:layout_marginHorizontal=\"8dp\"\r\n            android:padding=\"@dimen/grid_10\"\r\n            android:gravity=\"center\"\r\n            android:textColor=\"@color/primary\"\r\n            android:textSize=\"12sp\"\r\n            android:textAllCaps=\"true\"\r\n            android:foreground=\"?attr/selectableItemBackground\"\r\n            android:textStyle=\"bold\"\r\n            app:elevation=\"0dp\"\r\n            app:shapeAppearanceOverlay=\"@style/ShapeAppearanceOverlay.MyApp.Button.Rounded\"\r\n            tools:text=\"Proper Noun\" />\r\n    </LinearLayout>\r\n\r\n    <ToggleButton\r\n        android:id=\"@+id/playPause\"\r\n        android:layout_width=\"60dp\"\r\n        android:layout_height=\"60dp\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:background=\"@drawable/round_rect_button_bg\"\r\n        android:backgroundTint=\"@color/primary\"\r\n        android:drawableTop=\"@drawable/play_button\"\r\n        android:foreground=\"?android:attr/selectableItemBackground\"\r\n        android:paddingTop=\"10dp\"\r\n        android:text=\"\"\r\n        android:textOff=\"\"\r\n        android:textOn=\"\"\r\n        app:layout_constraintBottom_toTopOf=\"@+id/score\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/image_view_teacher\"\r\n        app:layout_constraintStart_toStartOf=\"@+id/score\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/linearLayout\"\r\n        tools:ignore=\"UnusedAttribute\" />\r\n\r\n\r\n    <com.airbnb.lottie.LottieAnimationView\r\n        android:id=\"@+id/image_view_teacher\"\r\n        android:layout_width=\"110dp\"\r\n        android:layout_height=\"120dp\"\r\n        android:layout_alignParentEnd=\"true\"\r\n        app:layout_constraintBottom_toTopOf=\"@+id/giveTestButton\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/giveTestButton\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/linearLayout\"\r\n        app:layout_constraintVertical_bias=\"1.0\"\r\n        app:lottie_loop=\"true\"\r\n        app:lottie_rawRes=\"@raw/talking_avatar\" />\r\n\r\n    <LinearLayout\r\n        android:id=\"@+id/giveTestButton\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_alignParentBottom=\"true\"\r\n        android:layout_marginHorizontal=\"30dp\"\r\n        android:layout_marginBottom=\"@dimen/grid_1\"\r\n        android:background=\"@drawable/tv_shape\"\r\n        android:backgroundTint=\"@color/accent\"\r\n        android:orientation=\"horizontal\"\r\n        android:padding=\"@dimen/grid_10\"\r\n        android:text=\"@string/learn\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\">\r\n\r\n\r\n        <TextView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center\"\r\n            android:fontFamily=\"@font/reemkufi_medium\"\r\n            android:gravity=\"center\"\r\n            android:text=\"Learn\"\r\n            android:textAlignment=\"center\"\r\n            android:textAllCaps=\"true\"\r\n            android:textColor=\"@color/white\"\r\n            android:textSize=\"@dimen/default_font_size_big\" />\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:id=\"@+id/score\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_above=\"@id/image_view_teacher\"\r\n        android:layout_centerHorizontal=\"true\"\r\n\r\n        android:layout_marginBottom=\"8dp\"\r\n        android:background=\"@drawable/round_rect_button_bg\"\r\n        android:backgroundTint=\"@color/green\"\r\n        android:orientation=\"horizontal\"\r\n        app:layout_constraintBottom_toTopOf=\"@+id/giveTestButton\"\r\n        app:layout_constraintStart_toStartOf=\"@+id/giveTestButton\">\r\n\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"80dp\"\r\n            android:layout_height=\"match_parent\"\r\n            android:layout_gravity=\"center\"\r\n            android:layout_weight=\"1\"\r\n            android:background=\"@drawable/round_rect_button_bg\"\r\n            android:backgroundTint=\"@color/red\"\r\n            android:gravity=\"center\"\r\n            android:paddingHorizontal=\"@dimen/grid_10\"\r\n            android:paddingVertical=\"@dimen/grid_10\">\r\n\r\n            <androidx.cardview.widget.CardView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                app:cardBackgroundColor=\"@color/transparent\"\r\n                app:cardCornerRadius=\"40dp\"\r\n                app:cardElevation=\"0dp\">\r\n\r\n                <TextView\r\n                    android:id=\"@+id/wrongText\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:fontFamily=\"@font/reemkufi_medium\"\r\n                    android:gravity=\"center\"\r\n                    android:text=\"@string/question_mark\"\r\n                    android:textColor=\"@color/white\"\r\n                    android:textSize=\"18sp\"\r\n                    android:textStyle=\"bold\" />\r\n            </androidx.cardview.widget.CardView>\r\n        </LinearLayout>\r\n\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/layout_set\"\r\n            android:layout_width=\"70dp\"\r\n            android:layout_height=\"match_parent\"\r\n            android:layout_weight=\"1\"\r\n            android:gravity=\"center\"\r\n            android:orientation=\"horizontal\">\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"70dp\"\r\n                android:layout_height=\"match_parent\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_weight=\"1\"\r\n                android:background=\"@drawable/round_rect_button_bg\"\r\n                android:backgroundTint=\"@color/green\"\r\n                android:gravity=\"center\"\r\n                android:paddingHorizontal=\"@dimen/grid_10\"\r\n                android:paddingVertical=\"@dimen/grid_10\">\r\n\r\n                <androidx.cardview.widget.CardView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    app:cardBackgroundColor=\"@color/transparent\"\r\n                    app:cardCornerRadius=\"40dp\"\r\n                    app:cardElevation=\"0dp\">\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/correctText\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:fontFamily=\"@font/reemkufi_medium\"\r\n                        android:gravity=\"center\"\r\n                        android:text=\"@string/question_mark\"\r\n                        android:textColor=\"@color/white\"\r\n                        android:textSize=\"18sp\"\r\n                        android:textStyle=\"bold\" />\r\n                </androidx.cardview.widget.CardView>\r\n\r\n            </LinearLayout>\r\n\r\n\r\n        </LinearLayout>\r\n\r\n    </LinearLayout>\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_grammar_test.xml b/app/src/main/res/layout/activity_grammar_test.xml
--- a/app/src/main/res/layout/activity_grammar_test.xml	(revision 7a276194d708deddf726aad7126afc97f2f4da50)
+++ b/app/src/main/res/layout/activity_grammar_test.xml	(date 1668837807900)
@@ -84,13 +84,11 @@
         android:weightSum="4"
         app:layout_constraintTop_toBottomOf="@+id/view_pager_identifying_nouns"
         tools:visibility="visible">
-
         <TextView
+
             android:id="@+id/key_1"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:layout_marginHorizontal="8dp"
-            android:padding="@dimen/grid_10"
+            android:layout_width="match_parent"
+            android:layout_height="match_parent"
             android:layout_weight="1"
             android:background="@drawable/keys_button_background"
             android:backgroundTint="@color/primary"
@@ -100,17 +98,20 @@
             android:textColor="@color/primary"
             android:textSize="12sp"
             android:textStyle="bold"
-            app:elevation="0dp"
             android:textAllCaps="true"
+            android:paddingVertical="@dimen/grid_10"
+            android:layout_marginHorizontal="4dp"
+            android:paddingHorizontal="2dp"
+            app:elevation="0dp"
             app:shapeAppearanceOverlay="@style/ShapeAppearanceOverlay.MyApp.Button.Rounded"
             tools:text="Common Noun" />
 
         <TextView
-            android:id="@+id/key_2"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:layout_marginHorizontal="8dp"
             android:padding="@dimen/grid_10"
+            android:id="@+id/key_2"
+            android:layout_width="match_parent"
+            android:layout_height="match_parent"
+            android:layout_marginHorizontal="4dp"
             android:layout_weight="1"
             android:background="@drawable/keys_button_background"
             android:backgroundTint="@color/primary"
@@ -120,48 +121,53 @@
             android:textColor="@color/primary"
             android:textSize="12sp"
             android:textStyle="bold"
+            android:paddingVertical="@dimen/grid_10"
+            android:paddingHorizontal="2dp"
             app:elevation="0dp"
             android:textAllCaps="true"
             app:shapeAppearanceOverlay="@style/ShapeAppearanceOverlay.MyApp.Button.Rounded"
             tools:text="Proper Noun" />
 
         <TextView
+            android:padding="@dimen/grid_10"
             android:id="@+id/key_3"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
+            android:paddingHorizontal="2dp"
+            android:layout_marginHorizontal="4dp"
+            android:layout_width="match_parent"
+            android:layout_height="match_parent"
             android:layout_weight="1"
-            android:layout_marginHorizontal="8dp"
-            android:padding="@dimen/grid_10"
             android:background="@drawable/keys_button_background"
             android:backgroundTint="@color/primary"
             android:fontFamily="@font/jellee_roman"
+            android:foreground="?attr/selectableItemBackground"
+            android:paddingVertical="@dimen/grid_10"
             android:gravity="center"
             android:textColor="@color/primary"
             android:textSize="12sp"
-            android:textAllCaps="true"
-            android:foreground="?attr/selectableItemBackground"
             android:textStyle="bold"
             app:elevation="0dp"
+            android:textAllCaps="true"
             app:shapeAppearanceOverlay="@style/ShapeAppearanceOverlay.MyApp.Button.Rounded"
             tools:text="Proper Noun" />
 
         <TextView
             android:id="@+id/key_4"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
+            android:layout_marginHorizontal="4dp"
+            android:layout_width="match_parent"
+            android:layout_height="match_parent"
             android:layout_weight="1"
+            android:paddingHorizontal="2dp"
             android:background="@drawable/keys_button_background"
+            android:paddingVertical="@dimen/grid_10"
             android:backgroundTint="@color/primary"
             android:fontFamily="@font/jellee_roman"
-            android:layout_marginHorizontal="8dp"
-            android:padding="@dimen/grid_10"
+            android:foreground="?attr/selectableItemBackground"
             android:gravity="center"
             android:textColor="@color/primary"
             android:textSize="12sp"
-            android:textAllCaps="true"
-            android:foreground="?attr/selectableItemBackground"
             android:textStyle="bold"
             app:elevation="0dp"
+            android:textAllCaps="true"
             app:shapeAppearanceOverlay="@style/ShapeAppearanceOverlay.MyApp.Button.Rounded"
             tools:text="Proper Noun" />
     </LinearLayout>
Index: app/src/main/res/layout/row_expandable_view.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.cardview.widget.CardView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:id=\"@+id/expandable\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\"\r\n    android:layout_marginHorizontal=\"5dp\"\r\n    android:padding=\"@dimen/grid_10\"\r\n    app:cardCornerRadius=\"5dp\"\r\n    android:layout_marginBottom=\"5dp\">\r\n\r\n    <com.robertlevonyan.views.expandable.Expandable\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:padding=\"8dp\"\r\n        app:exp_animateExpand=\"true\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/header\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"match_parent\"\r\n            android:fontFamily=\"@font/reemkufi_medium\"\r\n            android:gravity=\"center\"\r\n            android:text=\"\"\r\n            android:textAppearance=\"@style/TextAppearance.MaterialComponents.Headline6\"\r\n\r\n            />\r\n\r\n        <!--    layout=\"@layout/row_layout_level_3-->\r\n\r\n        <androidx.recyclerview.widget.RecyclerView\r\n            android:id=\"@+id/content\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\" />\r\n    </com.robertlevonyan.views.expandable.Expandable>\r\n</androidx.cardview.widget.CardView>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/row_expandable_view.xml b/app/src/main/res/layout/row_expandable_view.xml
--- a/app/src/main/res/layout/row_expandable_view.xml	(revision 7a276194d708deddf726aad7126afc97f2f4da50)
+++ b/app/src/main/res/layout/row_expandable_view.xml	(date 1668833540514)
@@ -7,12 +7,14 @@
     android:layout_marginHorizontal="5dp"
     android:padding="@dimen/grid_10"
     app:cardCornerRadius="5dp"
+
     android:layout_marginBottom="5dp">
 
     <com.robertlevonyan.views.expandable.Expandable
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:padding="8dp"
+        android:foreground="?attr/selectableItemBackground"
         app:exp_animateExpand="true">
 
         <TextView
Index: app/src/main/res/layout/subject_view.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.cardview.widget.CardView xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    app:cardCornerRadius=\"@dimen/grid_10\"\r\n\r\n    android:layout_margin=\"5dp\"\r\n    android:minHeight=\"100dp\"\r\n    android:layout_height=\"wrap_content\">\r\n\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:orientation=\"vertical\">\r\n\r\n        <RelativeLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:layout_weight=\"1\">\r\n\r\n\r\n            <RelativeLayout\r\n                android:id=\"@+id/relative_layout_time\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"40dp\"\r\n                android:layout_alignParentRight=\"true\"\r\n                android:layout_marginTop=\"@dimen/grid_10\"\r\n                android:background=\"@drawable/tv_shape\"\r\n\r\n                android:layout_marginRight=\"@dimen/grid_10\"\r\n                android:backgroundTint=\"@color/light_gray\">\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"Time Spent\"\r\n                    android:textSize=\"@dimen/default_font_size\"\r\n                    android:fontFamily=\"@font/reemkufi_medium\"\r\n                    android:id=\"@+id/timerText\"\r\n                    android:paddingHorizontal=\"@dimen/grid_10\"\r\n                    android:layout_centerVertical=\"true\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"40dp\"\r\n                    android:layout_height=\"40dp\"\r\n                    android:layout_centerInParent=\"true\"\r\n                    android:layout_toEndOf=\"@id/timerText\"\r\n                    android:background=\"@drawable/tv_shape\"\r\n                    android:backgroundTint=\"@color/primary\"\r\n                    android:gravity=\"center\"\r\n                    android:orientation=\"vertical\">\r\n\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/timeText\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_gravity=\"center\"\r\n                        android:fontFamily=\"@font/reemkufi_medium\"\r\n                        android:text=\"0\"\r\n                        android:textAlignment=\"center\"\r\n                        android:textColor=\"@color/white\"\r\n                        android:textSize=\"@dimen/default_font_size\"\r\n                        android:textStyle=\"bold\" />\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_below=\"@id/timeText\"\r\n                        android:layout_centerInParent=\"true\"\r\n                        android:layout_marginTop=\"-8dp\"\r\n                        android:fontFamily=\"@font/reemkufi_medium\"\r\n                        android:textSize=\"10sp\"\r\n                        android:text=\"Min\"\r\n                        android:textColor=\"@color/white\" />\r\n\r\n                </LinearLayout>\r\n\r\n\r\n            </RelativeLayout>\r\n\r\n            <TextView\r\n                android:id=\"@+id/subSubject\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginLeft=\"@dimen/grid_20\"\r\n                android:layout_alignParentStart=\"true\"\r\n                android:layout_marginTop=\"@dimen/grid_20\"\r\n                android:layout_toStartOf=\"@+id/relative_layout_time\"\r\n                android:fontFamily=\"@font/reemkufi_medium\"\r\n                android:text=\"Subject\"\r\n                android:textSize=\"@dimen/default_font_size_big\"\r\n                android:textStyle=\"bold\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/chapters\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@id/subSubject\"\r\n                android:layout_marginLeft=\"@dimen/grid_20\"\r\n                android:layout_alignParentStart=\"true\"\r\n                android:layout_toStartOf=\"@+id/relative_layout_time\"\r\n                android:fontFamily=\"@font/reemkufi_medium\"\r\n                android:text=\"Subject\"\r\n                android:textAlignment=\"textStart\"\r\n                android:textSize=\"@dimen/default_font_size\" />\r\n\r\n\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"Status\"\r\n                    android:gravity=\"center\"\r\n                    android:layout_below=\"@id/chapters\"\r\n                    android:layout_gravity=\"center\"\r\n                    android:textSize=\"@dimen/default_font_size_big\"\r\n                    android:fontFamily=\"@font/reemkufi_medium\"\r\n                    android:layout_marginLeft=\"20dp\" />\r\n\r\n\r\n\r\n                <TextView\r\n\r\n                    android:id=\"@+id/status\"\r\n                    android:layout_toEndOf=\"@id/chapters\"\r\n                    android:layout_below=\"@id/chapters\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n\r\n                    android:layout_marginTop=\"5dp\"\r\n                    android:background=\"@drawable/tv_shape\"\r\n                    android:backgroundTint=\"@color/accent\"\r\n                    android:fontFamily=\"@font/reemkufi_medium\"\r\n                    android:paddingHorizontal=\"@dimen/grid_10\"\r\n                    android:text=\"Incomplete\"\r\n                    android:textAlignment=\"center\"\r\n                    android:textColor=\"@color/white\"\r\n                    android:textSize=\"@dimen/default_font_size_small\"\r\n                    tools:ignore=\"NotSibling,RtlCompat\" />\r\n\r\n\r\n            </RelativeLayout>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center\"\r\n            android:orientation=\"horizontal\"\r\n            android:padding=\"@dimen/grid_10\">\r\n\r\n\r\n\r\n\r\n            <!--            <TextView-->\r\n            <!--                android:id=\"@+id/score\"-->\r\n            <!--                android:gravity=\"center\"-->\r\n            <!--                android:visibility=\"gone\"-->\r\n            <!--                android:layout_gravity=\"center\"-->\r\n            <!--                android:layout_width=\"wrap_content\"-->\r\n            <!--                android:layout_height=\"wrap_content\"-->\r\n            <!--                android:layout_below=\"@id/chapters\"-->\r\n            <!--                android:layout_centerHorizontal=\"true\"-->\r\n            <!--                android:backgroundTint=\"@color/accent\"-->\r\n            <!--                android:fontFamily=\"@font/reemkufi_medium\"-->\r\n            <!--                android:paddingHorizontal=\"@dimen/grid_10\"-->\r\n            <!--                android:text=\"Score :\"-->\r\n            <!--                android:textAlignment=\"center\"-->\r\n            <!--                android:textColor=\"@color/primary\"-->\r\n            <!--                android:textSize=\"@dimen/default_font_size_small\" />-->\r\n\r\n        </LinearLayout>\r\n\r\n\r\n    </LinearLayout>\r\n\r\n\r\n</androidx.cardview.widget.CardView>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/subject_view.xml b/app/src/main/res/layout/subject_view.xml
--- a/app/src/main/res/layout/subject_view.xml	(revision 7a276194d708deddf726aad7126afc97f2f4da50)
+++ b/app/src/main/res/layout/subject_view.xml	(date 1668833825439)
@@ -96,12 +96,12 @@
 
             <TextView
                 android:id="@+id/chapters"
-                android:layout_width="wrap_content"
+                android:layout_width="match_parent"
                 android:layout_height="wrap_content"
                 android:layout_below="@id/subSubject"
-                android:layout_marginLeft="@dimen/grid_20"
+                android:layout_marginHorizontal="@dimen/grid_20"
                 android:layout_alignParentStart="true"
-                android:layout_toStartOf="@+id/relative_layout_time"
+
                 android:fontFamily="@font/reemkufi_medium"
                 android:text="Subject"
                 android:textAlignment="textStart"
@@ -125,12 +125,12 @@
                 <TextView
 
                     android:id="@+id/status"
-                    android:layout_toEndOf="@id/chapters"
                     android:layout_below="@id/chapters"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
-
+                    android:layout_toEndOf="@id/subSubject"
                     android:layout_marginTop="5dp"
+                    android:layout_marginLeft="2dp"
                     android:background="@drawable/tv_shape"
                     android:backgroundTint="@color/accent"
                     android:fontFamily="@font/reemkufi_medium"
Index: app/src/main/java/com/maths/beyond_school_280720220930/fragments/EnglishFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.maths.beyond_school_280720220930.fragments;\r\n\r\nimport static com.maths.beyond_school_280720220930.utils.Constants.EXTRA_CATEGORY_ID;\r\nimport static com.maths.beyond_school_280720220930.utils.Constants.EXTRA_DATA;\r\nimport static com.maths.beyond_school_280720220930.utils.Constants.EXTRA_FLAG_HAVE_DATA;\r\nimport static com.maths.beyond_school_280720220930.utils.Constants.EXTRA_GRAMMAR_CATEGORY;\r\nimport static com.maths.beyond_school_280720220930.utils.Constants.EXTRA_IS_OPEN_FROM_LEARN;\r\nimport static com.maths.beyond_school_280720220930.utils.Constants.EXTRA_ONLINE_FLAG;\r\nimport static com.maths.beyond_school_280720220930.utils.Constants.EXTRA_OPEN_TYPE;\r\nimport static com.maths.beyond_school_280720220930.utils.Constants.EXTRA_SPELLING_DETAIL;\r\nimport static com.maths.beyond_school_280720220930.utils.Constants.EXTRA_TITLE;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.ActionBarDrawerToggle;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\n\r\nimport android.text.Html;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.material.bottomsheet.BottomSheetBehavior;\r\nimport com.google.android.material.button.MaterialButton;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.maths.beyond_school_280720220930.AlarmAtTime;\r\nimport com.maths.beyond_school_280720220930.HomeScreen;\r\nimport com.maths.beyond_school_280720220930.R;\r\nimport com.maths.beyond_school_280720220930.SP.PrefConfig;\r\nimport com.maths.beyond_school_280720220930.TabbedHomePage;\r\nimport com.maths.beyond_school_280720220930.TestActivity;\r\nimport com.maths.beyond_school_280720220930.ViewCurriculum;\r\nimport com.maths.beyond_school_280720220930.adapters.SectionSubSubjectRecyclerAdapter;\r\nimport com.maths.beyond_school_280720220930.adapters.SubjectRecyclerAdapter;\r\nimport com.maths.beyond_school_280720220930.adapters.SubjectRecyclerAdapterUpdated;\r\nimport com.maths.beyond_school_280720220930.database.grade_tables.GradeData;\r\nimport com.maths.beyond_school_280720220930.database.grade_tables.GradeDatabase;\r\nimport com.maths.beyond_school_280720220930.database.grade_tables.Grades_data;\r\nimport com.maths.beyond_school_280720220930.databinding.ActivityHomeScreenBinding;\r\nimport com.maths.beyond_school_280720220930.databinding.FragmentEnglishBinding;\r\nimport com.maths.beyond_school_280720220930.dialogs.HintDialog;\r\nimport com.maths.beyond_school_280720220930.english_activity.grammar.GrammarActivity;\r\nimport com.maths.beyond_school_280720220930.english_activity.grammar.test.GrammarTestActivity;\r\nimport com.maths.beyond_school_280720220930.english_activity.spelling.EnglishSpellingActivity;\r\nimport com.maths.beyond_school_280720220930.english_activity.spelling.spelling_test.SpellingTest;\r\nimport com.maths.beyond_school_280720220930.extras.CustomProgressDialogue;\r\nimport com.maths.beyond_school_280720220930.firebase.CallFirebaseForInfo;\r\nimport com.maths.beyond_school_280720220930.model.SectionSubSubject;\r\nimport com.maths.beyond_school_280720220930.model.SubSubject;\r\nimport com.maths.beyond_school_280720220930.retrofit.ApiClientContent;\r\nimport com.maths.beyond_school_280720220930.retrofit.ApiInterfaceContent;\r\nimport com.maths.beyond_school_280720220930.retrofit.model.content_new.ContentModelNew;\r\nimport com.maths.beyond_school_280720220930.utils.Constants;\r\nimport com.maths.beyond_school_280720220930.utils.ScreenType;\r\nimport com.maths.beyond_school_280720220930.utils.UtilityFunctions;\r\n\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.Date;\r\nimport java.util.List;\r\nimport java.util.concurrent.ExecutionException;\r\n\r\nimport retrofit2.Call;\r\nimport retrofit2.Callback;\r\nimport retrofit2.Response;\r\n\r\n\r\npublic class EnglishFragment extends Fragment {\r\n\r\n    private FragmentEnglishBinding binding;\r\n    private static final String TAG = \"EnglishFragment\";\r\n    private List<String> mathSub;\r\n    private List<String> engSub;\r\n    private String kidsGrade = \"\";\r\n    private String kidsName = \"\";\r\n    private GradeDatabase gradeDatabase;\r\n    private List<Grades_data> subMathsData;\r\n    private List<Grades_data> subEngData;\r\n    private SubjectRecyclerAdapter subjectRecyclerAdapter;\r\n    String[] math = {\"Addition\", \"Subtraction\", \"Multiplication Tables\", \"Division\"};\r\n    String[] eng = {\"Vocabulary\"};\r\n    private List<SubSubject> subMathList;\r\n    private List<SubSubject> subEngList;\r\n    private List<SectionSubSubject> sectionList;\r\n    private int[] resMath = {R.drawable.ic_addition, R.drawable.ic_sub, R.drawable.ic_mul, R.drawable.ic_division};\r\n    private int[] resEng = {R.drawable.ic_vocab_p, R.drawable.ic_spell_p, R.drawable.ic_spell_p, R.drawable.ic_spell_p};\r\n\r\n    private String[] tableList;\r\n    private SectionSubSubjectRecyclerAdapter sectionSubSubjectRecyclerAdapter;\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseUser mCurrentUser;\r\n    private int startIndex = 0;\r\n    private FirebaseFirestore kidsDb = FirebaseFirestore.getInstance();\r\n    ActionBarDrawerToggle toggle;\r\n    private int REQUEST_RECORD_AUDIO = 1;\r\n    private List<String> chapterListEng;\r\n    private List<String> chapterListMath;\r\n    private FirebaseFirestore firebaseFirestore;\r\n    private String subscriptionId = \"\";\r\n    private CustomProgressDialogue customProgressDialogue;\r\n    private BottomSheetBehavior mBottomSheetBehavior;\r\n    private List<GradeData> subjectDataNew;\r\n    private SubjectRecyclerAdapterUpdated subjectRecyclerAdapterUpdated;\r\n    private String userType = \"\";\r\n    private int noOfDays;\r\n    private int trialPeriodDay;\r\n    private String paymentStatus;\r\n    private int paymentAmount;\r\n    private String createAt;\r\n\r\n    @Override\r\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n\r\n        binding = FragmentEnglishBinding.bind(view);\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n        mCurrentUser = mAuth.getCurrentUser();\r\n        firebaseFirestore = FirebaseFirestore.getInstance();\r\n\r\n        subscriptionId = PrefConfig.readIdInPref(getContext(), getResources().getString(R.string.subscription_id));\r\n        subjectDataNew = new ArrayList<>();\r\n        startIndex = PrefConfig.readIntDInPref(getContext(), getResources().getString(R.string.alter_maths_value));\r\n        userType = PrefConfig.readIdInPref(getContext(), getResources().getString(R.string.user_type));\r\n\r\n        noOfDays = PrefConfig.readIntInPref(getContext(), getResources().getString(R.string.noOfdays), 0);\r\n        trialPeriodDay = PrefConfig.readIntInPref(getContext(), getResources().getString(R.string.trial_period), 0);\r\n        paymentStatus = PrefConfig.readIdInPref(getContext(), getResources().getString(R.string.payment_status));\r\n        paymentAmount = PrefConfig.readIntDInPref(getContext(), getResources().getString(R.string.plan_value));\r\n        createAt=PrefConfig.readIdInPref(getContext(),getResources().getString(R.string.created_at));\r\n        customProgressDialogue = new CustomProgressDialogue(getContext());\r\n        mathSub = new ArrayList<>();\r\n        engSub = new ArrayList<>();\r\n\r\n        subMathsData = new ArrayList<>();\r\n        subEngData = new ArrayList<>();\r\n\r\n        subMathList = new ArrayList<>();\r\n        subEngList = new ArrayList<>();\r\n        sectionList = new ArrayList<>();\r\n\r\n        tableList = getResources().getStringArray(R.array.table_name);\r\n        subjectRecyclerAdapter = new SubjectRecyclerAdapter(subMathsData, getContext());\r\n\r\n        kidsGrade = PrefConfig.readIdInPref(getContext(), getResources().getString(R.string.kids_grade));\r\n\r\n        kidsName = PrefConfig.readIdInPref(getContext(), getResources().getString(R.string.kids_name));\r\n        gradeDatabase = GradeDatabase.getDbInstance(getContext());\r\n\r\n        mathSub = Arrays.asList(math);\r\n        engSub = Arrays.asList(eng);\r\n\r\n\r\n        //TODO must take care\r\n        setSubSubjectProgress();\r\n        // uiChnages();\r\n\r\n    }\r\n\r\n\r\n    private void uiChnages() {\r\n\r\n        userType = PrefConfig.readIdInPref(getContext(), getResources().getString(R.string.user_type));\r\n        binding.evaluationTestTile.setVisibility(View.GONE);\r\n\r\n//        binding.introTile.setOnClickListener(v -> {\r\n//\r\n//            startActivity(new Intent(getContext(), TestActivity.class));\r\n//        });\r\n\r\n        if (!userType.equals(\"old_user\")) {\r\n            binding.completeProgressTile.setVisibility(View.GONE);\r\n        } else {\r\n            binding.completeProgressTile.setVisibility(View.VISIBLE);\r\n            binding.startExeButtonLayout.setVisibility(View.GONE);\r\n        }\r\n\r\n        binding.startExeButtonLayout.setOnClickListener(v -> {\r\n            PrefConfig.writeIdInPref(getContext(), \"old_user\", getResources().getString(R.string.user_type));\r\n            binding.nestedScrollView.setSmoothScrollingEnabled(true);\r\n            binding.nestedScrollView.scrollTo(0, 0);\r\n            binding.startExeButtonLayout.setVisibility(View.GONE);\r\n            binding.completeProgressTile.setVisibility(View.VISIBLE);\r\n            displayTrialPeriodDialog(false);\r\n            //startActivity(new Intent(getContext(), ViewCurriculum.class));\r\n        });\r\n\r\n        binding.gotoViewCurriculumOne.setOnClickListener(v -> {\r\n\r\n            if (!PrefConfig.readIdInPref(getContext(), getResources().getString(R.string.user_type)).equals(\"old_user\"))\r\n                displayTrialPeriodDialog(true);\r\n            else\r\n                startActivity(new Intent(getContext(), ViewCurriculum.class));\r\n\r\n            PrefConfig.writeIdInPref(getContext(), \"old_user\", getResources().getString(R.string.user_type));\r\n        });\r\n\r\n        binding.gotoViewCurriculumTwo.setOnClickListener(v -> {\r\n            if (!PrefConfig.readIdInPref(getContext(), getResources().getString(R.string.user_type)).equals(\"old_user\"))\r\n                displayTrialPeriodDialog(true);\r\n            else\r\n                startActivity(new Intent(getContext(), ViewCurriculum.class));\r\n\r\n\r\n            PrefConfig.writeIdInPref(getContext(), \"old_user\", getResources().getString(R.string.user_type));\r\n        });\r\n        dateChecking();\r\n\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n\r\n\r\n        //  Inflate the layout for this fragment\r\n        return inflater.inflate(R.layout.fragment_english, container, false);\r\n    }\r\n\r\n\r\n    private void displayTrialPeriodDialog(boolean gotoViewCurriculum) {\r\n        int trialPeriod = PrefConfig.readIntInPref(getContext(), getResources().getString(R.string.trial_period), 0);\r\n        HintDialog hintDialog = new HintDialog(getContext());\r\n        hintDialog.setCancelable(true);\r\n        hintDialog.setAlertTitle(\"Trial Period\");\r\n        hintDialog.setAlertDesciption(String.valueOf(Html.fromHtml(\"Your trial period is started from today and it will be end in <font color='#64c1c7'>\" + trialPeriod + \" Days.</font>\", Html.FROM_HTML_MODE_COMPACT)));\r\n        hintDialog.hideActionButton();\r\n        hintDialog.hideCloseButton();\r\n        if (gotoViewCurriculum)\r\n            hintDialog.displaySubscribeButton(\"View Curriculum\");\r\n        hintDialog.setOnActionListener(viewId -> {\r\n\r\n            switch (viewId.getId()) {\r\n\r\n                case R.id.closeButton:\r\n                    hintDialog.dismiss();\r\n                    break;\r\n                case R.id.gotoTextView:\r\n                    if (gotoViewCurriculum)\r\n                        startActivity(new Intent(getContext(), ViewCurriculum.class));\r\n                    hintDialog.dismiss();\r\n                    break;\r\n            }\r\n        });\r\n\r\n        hintDialog.show();\r\n\r\n    }\r\n\r\n\r\n    private void dateChecking() {\r\n\r\n        Log.d(TAG, \"dateChecking: \");\r\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"dd/MM/yyyy\");\r\n        if (!PrefConfig.readIdInPref(getContext(), getResources().getString(R.string.alter_maths)).equals(simpleDateFormat.format(new Date()))) {\r\n            // Added functionality when we got a new date\r\n            try {\r\n                UtilityFunctions.checkUpdatePaymentStatus(getContext(), subscriptionId, firebaseFirestore, mAuth);\r\n\r\n            } catch (ExecutionException e) {\r\n                e.printStackTrace();\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n            if (PrefConfig.readIdInPref(getContext(), getResources().getString(R.string.timer_time)).equals(\"\")) {\r\n                //displayAddProfileAlertDialog();\r\n            }\r\n            PrefConfig.writeIdInPref(getContext(), simpleDateFormat.format(new Date()), getResources().getString(R.string.alter_maths));\r\n            if (PrefConfig.readIntDInPref(getContext(), getResources().getString(R.string.alter_maths_value)) == 0) {\r\n                PrefConfig.writeIntDInPref(getContext(), 2, getResources().getString(R.string.alter_maths_value));\r\n                startIndex = 2;\r\n            } else {\r\n                PrefConfig.writeIntDInPref(getContext(), 0, getResources().getString(R.string.alter_maths_value));\r\n                startIndex = 0;\r\n            }\r\n            getUiData(true);\r\n            //  customProgressDialogue.show();\r\n        } else {\r\n\r\n            Log.i(\"List_data sd\", PrefConfig.readNormalListInPref(getContext(), getResources().getString(R.string.saved_english_value)) + \"\");\r\n\r\n            if (PrefConfig.readNormalListInPref(getContext(), getResources().getString(R.string.saved_english_value)).size() == 0) {\r\n                getUiData(true);\r\n                if (PrefConfig.readIdInPref(getContext(), getResources().getString(R.string.timer_time)).equals(\"\")) {\r\n                    // displayAddProfileAlertDialog();\r\n                }\r\n            } else\r\n                getUiData(false);\r\n            if (startIndex == 0) {\r\n                PrefConfig.writeIntDInPref(getContext(), 0, getResources().getString(R.string.alter_maths_value));\r\n            } else {\r\n                PrefConfig.writeIntDInPref(getContext(), 2, getResources().getString(R.string.alter_maths_value));\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    private void getUiData(boolean isNewCall) throws ArrayIndexOutOfBoundsException, NullPointerException {\r\n\r\n        subMathsData.clear();\r\n        subEngData.clear();\r\n        chapterListEng = new ArrayList<>();\r\n        chapterListMath = new ArrayList<>();\r\n        chapterListMath.clear();\r\n        chapterListEng.clear();\r\n\r\n        subjectRecyclerAdapter.notifyDataSetChanged();\r\n        Log.d(TAG, \"getUiData: \");\r\n\r\n        if (isNewCall) {\r\n\r\n            getDataFromDatabase(isNewCall);\r\n            customProgressDialogue.dismiss();\r\n            Log.d(TAG, \"getUiData: if\");\r\n\r\n        } else {\r\n            getDataFromDatabase(isNewCall);\r\n            chapterListEng.clear();\r\n            chapterListMath.clear();\r\n            Log.d(TAG, \"getUiData: else\");\r\n\r\n        }\r\n    }\r\n    //getting data from local db\r\n\r\n    private void getDataFromDatabase(boolean isNewCall) {\r\n\r\n        subjectDataNew.clear();\r\n\r\n        Log.d(\"TAG\", \"getDataFromDatabase:call \");\r\n        if (isNewCall) {\r\n            if (eng.length <= 2) {\r\n                try {\r\n                    for (String st : eng) {\r\n                        subjectDataNew.add(gradeDatabase.gradesDaoUpdated().getSubjectDataIncompleteFirst(st).get(0));\r\n                        chapterListEng.add(gradeDatabase.gradesDaoUpdated().getSubjectDataIncompleteFirst(st).get(0).getId());\r\n                        Log.d(\"XXXXX\", \"getDataFromDatabase: IF SIZE \" + subjectDataNew);\r\n//            gradeDatabase.gradesDaoUpdated().getSubjectDataLimited(st).observe(this, grades_data -> {\r\n//                Log.d(\"XXX\", \"getDataFromDatabase: \"+grades_data.size());\r\n//                subjectRecyclerAdapterUpdated.submitList(grades_data);\r\n//            });\r\n                    }\r\n                } catch (Exception e) {\r\n                    Log.d(TAG, \"getDataFromDatabase: Database not found\");\r\n                }\r\n            } else {\r\n                List<Integer> ls = new ArrayList();\r\n                chapterListEng.clear();\r\n\r\n                ls = UtilityFunctions.getRandomTwoIntegerUpto(eng.length, 0);\r\n                Log.d(\"LIST_SIZE\", \"getDataFromDatabase: \" + ls.size());\r\n                for (int index : ls) {\r\n                    try {\r\n                        subjectDataNew.add(gradeDatabase.gradesDaoUpdated().getSubjectDataIncompleteFirst(eng[index]).get(0));\r\n                        chapterListEng.add(gradeDatabase.gradesDaoUpdated().getSubjectDataIncompleteFirst(eng[index]).get(0).getId());\r\n                        Log.d(\"XXXXX\", \"getDataFromDatabase:  ELSE SIZE\" + subjectDataNew);\r\n                    } catch (Exception e) {\r\n                    }\r\n                }\r\n\r\n            }\r\n            PrefConfig.writeNormalListInPref(getContext(), chapterListEng, getResources().getString(R.string.saved_english_value));\r\n\r\n        } else {\r\n            try {\r\n                chapterListEng = PrefConfig.readNormalListInPref(getContext(), getResources().getString(R.string.saved_english_value));\r\n                for (String st : chapterListEng) {\r\n                    subjectDataNew.add(gradeDatabase.gradesDaoUpdated().getSubjectDataViaID(st).get(0));\r\n                    Log.d(\"XXXX\", \"getDataFromDatabase: OLD \" + subjectDataNew);\r\n//            gradeDatabase.gradesDaoUpdated().getSubjectDataLimited(st).observe(this, grades_data -> {\r\n//                Log.d(\"XXX\", \"getDataFromDatabase: \"+grades_data.size());\r\n//                subjectRecyclerAdapterUpdated.submitList(grades_data);\r\n//            });\r\n                }\r\n\r\n            } catch (Exception e) {\r\n\r\n                chapterListEng.clear();\r\n\r\n                if (eng.length <= 2) {\r\n                    for (String st : eng) {\r\n                        subjectDataNew.add(gradeDatabase.gradesDaoUpdated().getSubjectDataIncompleteFirst(st).get(0));\r\n                        chapterListEng.add(gradeDatabase.gradesDaoUpdated().getSubjectDataIncompleteFirst(st).get(0).getId());\r\n                        Log.d(TAG, \"getDataFromDatabase:SIZE 2 \" + subjectDataNew);\r\n//            gradeDatabase.gradesDaoUpdated().getSubjectDataLimited(st).observe(this, grades_data -> {\r\n//                Log.d(\"XXX\", \"getDataFromDatabase: \"+grades_data.size());\r\n//                subjectRecyclerAdapterUpdated.submitList(grades_data);\r\n//            });\r\n                    }\r\n                } else {\r\n                    List<Integer> ls = new ArrayList();\r\n                    Log.d(TAG, \"LIST_SIZE: \" + ls.size());\r\n                    ls = UtilityFunctions.getRandomTwoIntegerUpto(eng.length, 0);\r\n                    for (int index : ls) {\r\n                        subjectDataNew.add(gradeDatabase.gradesDaoUpdated().getSubjectDataIncompleteFirst(eng[index]).get(0));\r\n                        chapterListEng.add(gradeDatabase.gradesDaoUpdated().getSubjectDataIncompleteFirst(eng[index]).get(0).getId());\r\n                        Log.d(TAG, \"getDataFromDatabase:ELSE SIZE \" + subjectDataNew);\r\n                    }\r\n\r\n                }\r\n                PrefConfig.writeNormalListInPref(getContext(), chapterListEng, getResources().getString(R.string.saved_english_value));\r\n\r\n            }\r\n\r\n        }\r\n\r\n        binding.englishRecyclerView.setLayoutManager(new LinearLayoutManager(getContext(), LinearLayoutManager.VERTICAL, false));\r\n        subjectRecyclerAdapterUpdated = new SubjectRecyclerAdapterUpdated(getContext(), gradeData -> {\r\n\r\n//            Intent intent;\r\n//            Log.d(TAG, \"setRecyclerViewData: \" + gradeData.getRequest());\r\n//            if (gradeData.getSubject().equals(\"Spelling_CommonWords\")) {\r\n//                intent = new Intent(getContext(), EnglishSpellingActivity.class);\r\n//                intent.putExtra(Constants.EXTRA_SPELLING_DETAIL, gradeData.getChapter_name());\r\n//            } else {\r\n//                intent = new Intent(getContext(), GrammarActivity.class);\r\n//                intent.putExtra(Constants.EXTRA_GRAMMAR_CATEGORY, gradeData.getChapter_name());\r\n//            }\r\n//            intent.putExtra(Constants.EXTRA_ONLINE_FLAG, true);\r\n//            intent.putExtra(Constants.EXTRA_CATEGORY_ID, gradeData.getId());\r\n//            intent.putExtra(EXTRA_TITLE, gradeData.getSubject());\r\n//            startActivity(intent);\r\n\r\n            if (paymentStatus.equals(\"active\")) {\r\n                if (!gradeData.isIs_completed()) {\r\n                    navigateToNextScreen(gradeData, true);\r\n                } else {\r\n                    navigateToNextScreen(gradeData, false);\r\n                }\r\n\r\n            } else {\r\n\r\n                if (UtilityFunctions.diffDate(createAt,new Date().toString()) < trialPeriodDay) {\r\n                    if (!gradeData.isIs_completed()) {\r\n                        navigateToNextScreen(gradeData, true);\r\n                    } else {\r\n                        navigateToNextScreen(gradeData, false);\r\n                    }\r\n\r\n                }\r\n                else {\r\n                    UtilityFunctions.displayCustomDialogSubscribe(getContext(), \"Subscribe\", \"Hey you don't have any subscription plan. Please subscribe to continue.\", \"Subscribe @ Rs \" + paymentAmount + \"/ Month\");\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n        binding.englishRecyclerView.setAdapter(subjectRecyclerAdapterUpdated);\r\n        subjectRecyclerAdapterUpdated.submitList(subjectDataNew);\r\n    }\r\n\r\n\r\n    private void navigateToNextScreen(GradeData gradeData, Boolean isLearn) {\r\n        var a = ApiClientContent.getClient().create(ApiInterfaceContent.class);\r\n        a.getData(gradeData.getId(), gradeData.getSub_subject_id()).enqueue(new Callback<ContentModelNew>() {\r\n            @Override\r\n            public void onResponse(@NonNull Call<ContentModelNew> call, @NonNull Response<ContentModelNew> response) {\r\n                if (response.body() != null) {\r\n                    handleResponse(response.body(), gradeData, isLearn);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onFailure(@NonNull Call<ContentModelNew> call, @NonNull Throwable t) {\r\n                Log.d(\"AAA\", \"onFailure: \" + t.getLocalizedMessage());\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    private void handleResponse(ContentModelNew body, GradeData gradeData, Boolean isLearn) {\r\n        ScreenType screenType;\r\n        try {\r\n            screenType = ScreenType.valueOf(body.getMeta().getScreen_type());\r\n        } catch (IllegalArgumentException e) {\r\n            Toast.makeText(getContext(), e.getMessage(), Toast.LENGTH_SHORT).show();\r\n            return;\r\n        }\r\n        Intent intent;\r\n        Constants.OpenType openType;\r\n        switch (screenType) {\r\n            case LETTER_BY_LETTER: {\r\n                if (isLearn) {\r\n                    intent = new Intent(getContext(), EnglishSpellingActivity.class);\r\n                    openType = Constants.OpenType.LEARNING;\r\n                } else {\r\n                    intent = new Intent(getContext(), SpellingTest.class);\r\n                    openType = Constants.OpenType.EXERCISE;\r\n                }\r\n                intent.putExtra(EXTRA_SPELLING_DETAIL, gradeData.getChapter_name());\r\n            }\r\n            break;\r\n            case CHOSE_THE_CORRECT_WORD: {\r\n                if (isLearn) {\r\n                    intent = new Intent(getContext(), GrammarActivity.class);\r\n                    openType = Constants.OpenType.LEARNING;\r\n                } else {\r\n                    intent = new Intent(getContext(), GrammarTestActivity.class);\r\n                    openType = Constants.OpenType.EXERCISE;\r\n                }\r\n                intent.putExtra(EXTRA_GRAMMAR_CATEGORY, gradeData.getChapter_name());\r\n            }\r\n            break;\r\n            default:\r\n                Toast.makeText(getContext(), \"No activity found for this screen type\", Toast.LENGTH_SHORT).show();\r\n                return;\r\n        }\r\n\r\n        Log.d(TAG, \"handleResponse: \" + openType);\r\n        intent.putExtra(EXTRA_OPEN_TYPE, openType.name()); //TODO : u can check weather is intent in learning or exercise\r\n        intent.putExtra(EXTRA_DATA, body);\r\n        intent.putExtra(EXTRA_FLAG_HAVE_DATA, true);\r\n        intent.putExtra(EXTRA_ONLINE_FLAG, true);\r\n        intent.putExtra(EXTRA_IS_OPEN_FROM_LEARN, false);\r\n        intent.putExtra(EXTRA_CATEGORY_ID, gradeData.getId());\r\n        intent.putExtra(EXTRA_TITLE, gradeData.getSubject());\r\n        startActivity(intent);\r\n    }\r\n\r\n\r\n    private void setSubSubjectProgress() {\r\n\r\n        subMathList.clear();\r\n        subEngList.clear();\r\n        sectionList.clear();\r\n\r\n\r\n        eng = gradeDatabase.gradesDaoUpdated().getChapterNames();\r\n\r\n        if (eng.length != 0) {\r\n            binding.noDataFound.setVisibility(View.GONE);\r\n            binding.completeProgressTile.setVisibility(View.VISIBLE);\r\n//        for (int i = 0; i < math.length; i++) {\r\n//            int total = UtilityFunctions.gettingSubSubjectData(gradeDatabase, kidsGrade, math[i].split(\" \")[0], true).size();\r\n//            int completed = UtilityFunctions.gettingSubSubjectData(gradeDatabase, kidsGrade, math[i], false).size();\r\n//            if (!math[i].equals(\"Multiplication Tables\")) {\r\n//                subMathList.add(new SubSubject(math[i], total, completed, resMath[i]));\r\n//            } else {\r\n//                Log.i(\"Mul_Data\", total + \",\" + UtilityFunctions.gettingSubSubjectData(gradeDatabase, kidsGrade, math[i].split(\" \")[0], false));\r\n//                int mulUpto = PrefConfig.readIntInPref(getApplicationContext(), getResources().getString(R.string.multiplication_upto));\r\n//                total = Integer.parseInt(UtilityFunctions.gettingSubSubjectData(gradeDatabase, kidsGrade, math[i].split(\" \")[0], true).get(total - 1).chapter.split(\" \")[3]);\r\n//                if (mulUpto == 1)\r\n//                    subMathList.add(new SubSubject(math[i], total, 0, resMath[i]));\r\n//                else\r\n//                    subMathList.add(new SubSubject(math[i], total, mulUpto, resMath[i]));\r\n//            }\r\n//        }\r\n//\r\n//        sectionList.add(new SectionSubSubject(\"Mathematics\", subMathList));\r\n\r\n            for (int i = 0; i < eng.length; i++) {\r\n                int total = gradeDatabase.gradesDaoUpdated().getSubjectCount(eng[i]);\r\n                //TODO: MUST BE UPDATE\r\n                int completed = gradeDatabase.gradesDaoUpdated().getSubjectCompleteCount(eng[i]);\r\n                //int completed = UtilityFunctions.gettingSubSubjectData(gradeDatabase, kidsGrade, eng[i], false).size();\r\n                subEngList.add(new SubSubject(eng[i], total, completed, resEng[i]));\r\n            }\r\n\r\n            sectionList.add(new SectionSubSubject(\"\", subEngList));\r\n\r\n\r\n            binding.progressRecyclerView.setLayoutManager(new LinearLayoutManager(getContext(), LinearLayoutManager.HORIZONTAL, false));\r\n            sectionSubSubjectRecyclerAdapter = new SectionSubSubjectRecyclerAdapter(sectionList, getContext());\r\n            binding.progressRecyclerView.setAdapter(sectionSubSubjectRecyclerAdapter);\r\n\r\n            uiChnages();\r\n        } else {\r\n            binding.noDataFound.setVisibility(View.VISIBLE);\r\n            binding.completeProgressTile.setVisibility(View.GONE);\r\n            binding.gotoViewCurriculumOne.setVisibility(View.INVISIBLE);\r\n            binding.gotoViewCurriculumTwo.setVisibility(View.INVISIBLE);\r\n            binding.startExeButtonLayout.setVisibility(View.GONE);\r\n\r\n        }\r\n\r\n//        final AlertDialog.Builder alert = new AlertDialog.Builder(getContext());\r\n//        View mView = getLayoutInflater().inflate(R.layout.progress_report_dialog, null);\r\n//\r\n//        alert.setView(mView);\r\n//        final AlertDialog alertDialog = alert.create();\r\n//        alertDialog.setCancelable(true);\r\n//        alertDialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\r\n//        RecyclerView progressView = mView.findViewById(R.id.progressRecyclerView);\r\n//        ImageView closeButton = mView.findViewById(R.id.closeButton);\r\n//\r\n//\r\n//\r\n//\r\n//        try {\r\n//            alertDialog.show();\r\n//        } catch (Exception e) {\r\n//\r\n//        }\r\n//\r\n//        closeButton.setOnClickListener(v -> alertDialog.dismiss());\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onResume() {\r\n        super.onResume();\r\n        setSubSubjectProgress();\r\n        paymentStatus = PrefConfig.readIdInPref(getContext(), getResources().getString(R.string.payment_status));\r\n        userType = PrefConfig.readIdInPref(getContext(), getResources().getString(R.string.user_type));\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/maths/beyond_school_280720220930/fragments/EnglishFragment.java b/app/src/main/java/com/maths/beyond_school_280720220930/fragments/EnglishFragment.java
--- a/app/src/main/java/com/maths/beyond_school_280720220930/fragments/EnglishFragment.java	(revision 7a276194d708deddf726aad7126afc97f2f4da50)
+++ b/app/src/main/java/com/maths/beyond_school_280720220930/fragments/EnglishFragment.java	(date 1668834259282)
@@ -118,6 +118,7 @@
     private int paymentAmount;
     private String createAt;
 
+
     @Override
     public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {
         super.onViewCreated(view, savedInstanceState);
@@ -464,18 +465,22 @@
 
 
     private void navigateToNextScreen(GradeData gradeData, Boolean isLearn) {
+        customProgressDialogue.show();
         var a = ApiClientContent.getClient().create(ApiInterfaceContent.class);
         a.getData(gradeData.getId(), gradeData.getSub_subject_id()).enqueue(new Callback<ContentModelNew>() {
             @Override
             public void onResponse(@NonNull Call<ContentModelNew> call, @NonNull Response<ContentModelNew> response) {
                 if (response.body() != null) {
                     handleResponse(response.body(), gradeData, isLearn);
+                    customProgressDialogue.dismiss();
                 }
             }
 
             @Override
             public void onFailure(@NonNull Call<ContentModelNew> call, @NonNull Throwable t) {
                 Log.d("AAA", "onFailure: " + t.getLocalizedMessage());
+                customProgressDialogue.dismiss();
+                Toast.makeText(getContext(), t.getLocalizedMessage(), Toast.LENGTH_SHORT).show();
             }
         });
     }
Index: app/src/main/res/layout/row_layout_level_3.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:id=\"@+id/expandable\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"wrap_content\"\r\n    android:orientation=\"vertical\"\r\n    android:paddingHorizontal=\"@dimen/grid_1\">\r\n\r\n    <TextView\r\n        android:id=\"@+id/chapters\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"5dp\"\r\n        android:fontFamily=\"@font/reemkufi_medium\"\r\n        android:text=\"\"\r\n        android:textColor=\"@color/primary\"\r\n        android:textSize=\"@dimen/default_font_size_big\"\r\n        android:textStyle=\"bold\" />\r\n\r\n\r\n    <RelativeLayout\r\n        android:id=\"@+id/relativeLayoutLearn\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/text_view_lesson\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_alignParentStart=\"true\"\r\n            android:layout_toStartOf=\"@+id/image_view_lesson_lock\"\r\n            android:fontFamily=\"@font/reemkufi_medium\"\r\n            android:padding=\"@dimen/grid_1\"\r\n            android:text=\"Learn and Practice\"\r\n            android:textAppearance=\"?attr/textAppearanceBody1\"\r\n            android:textStyle=\"bold\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/text_view_enroll\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/text_view_lesson\"\r\n            android:fontFamily=\"@font/reemkufi_medium\"\r\n            android:paddingStart=\"@dimen/grid_1\"\r\n            android:text=\"@string/enroll_to_unlock\"\r\n            tools:ignore=\"RtlSymmetry\" />\r\n\r\n        <ImageView\r\n            android:id=\"@+id/image_view_lesson_lock\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_above=\"@id/divider_lesson\"\r\n            android:layout_alignParentTop=\"true\"\r\n            android:layout_alignParentEnd=\"true\"\r\n            android:contentDescription=\"@string/blanks\"\r\n            android:src=\"@drawable/outline_lock_24\" />\r\n\r\n        <com.google.android.material.divider.MaterialDivider\r\n            android:id=\"@+id/divider_lesson\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/text_view_enroll\"\r\n            android:layout_marginTop=\"@dimen/grid_1\" />\r\n    </RelativeLayout>\r\n\r\n    <RelativeLayout\r\n        android:id=\"@+id/relativeLayoutExercise\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/text_view_test\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_alignParentStart=\"true\"\r\n            android:layout_toStartOf=\"@+id/image_view_lesson_lock_test\"\r\n            android:fontFamily=\"@font/reemkufi_medium\"\r\n            android:padding=\"@dimen/grid_1\"\r\n            android:text=\"Exercise\"\r\n            android:textAppearance=\"?attr/textAppearanceBody1\"\r\n            android:textStyle=\"bold\" />\r\n\r\n        <TextView\r\n            android:id=\"@+id/text_view_enroll_test\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/text_view_test\"\r\n            android:fontFamily=\"@font/reemkufi_medium\"\r\n            android:paddingStart=\"@dimen/grid_1\"\r\n            android:text=\"@string/enroll_to_unlock\"\r\n            tools:ignore=\"RtlSymmetry\" />\r\n\r\n        <ImageView\r\n            android:id=\"@+id/image_view_lesson_lock_test\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_above=\"@id/divider_lesson_test\"\r\n            android:layout_alignParentTop=\"true\"\r\n            android:layout_alignParentEnd=\"true\"\r\n            android:contentDescription=\"@string/blanks\"\r\n            android:src=\"@drawable/outline_lock_24\" />\r\n\r\n        <com.google.android.material.divider.MaterialDivider\r\n            android:id=\"@+id/divider_lesson_test\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/text_view_enroll_test\"\r\n            android:layout_marginTop=\"@dimen/grid_1\" />\r\n    </RelativeLayout>\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/row_layout_level_3.xml b/app/src/main/res/layout/row_layout_level_3.xml
--- a/app/src/main/res/layout/row_layout_level_3.xml	(revision 7a276194d708deddf726aad7126afc97f2f4da50)
+++ b/app/src/main/res/layout/row_layout_level_3.xml	(date 1668832666552)
@@ -22,7 +22,9 @@
     <RelativeLayout
         android:id="@+id/relativeLayoutLearn"
         android:layout_width="match_parent"
-        android:layout_height="wrap_content">
+        android:layout_height="wrap_content"
+        android:foreground="?attr/selectableItemBackground"
+        >
 
         <TextView
             android:id="@+id/text_view_lesson"
@@ -67,7 +69,9 @@
     <RelativeLayout
         android:id="@+id/relativeLayoutExercise"
         android:layout_width="match_parent"
-        android:layout_height="wrap_content">
+        android:layout_height="wrap_content"
+        android:foreground="?attr/selectableItemBackground"
+        >
 
         <TextView
             android:id="@+id/text_view_test"
Index: app/src/main/res/layout/activity_grammar.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\"\r\n    tools:context=\".english_activity.grammar.GrammarActivity\">\r\n\r\n\r\n    <include\r\n        android:id=\"@+id/toolBar\"\r\n        layout=\"@layout/tool_bar_layout_back_button\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_alignParentTop=\"true\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n\r\n    <TextView\r\n        android:id=\"@+id/text_view_category\"\r\n        style=\"@style/TextAppearance.AppCompat.Widget.ActionBar.Title\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_below=\"@id/toolBar\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_marginTop=\"-10dp\"\r\n        android:fontFamily=\"@font/reemkufi_medium\"\r\n        android:gravity=\"center\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/toolBar\"\r\n        tools:text=\"Category : Personal\" />\r\n\r\n    <ImageView\r\n        android:id=\"@+id/hintButton\"\r\n        android:layout_width=\"40dp\"\r\n        android:layout_height=\"40dp\"\r\n        android:layout_gravity=\"center\"\r\n        android:layout_marginStart=\"10dp\"\r\n        android:background=\"@drawable/round_rect_button_bg\"\r\n        android:backgroundTint=\"@color/white\"\r\n        android:fontFamily=\"@font/reemkufi_medium\"\r\n        android:minWidth=\"55dp\"\r\n        android:src=\"@drawable/light_bulb\"\r\n        android:textAlignment=\"center\"\r\n        android:textColor=\"@color/white\"\r\n        android:textSize=\"30sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintBottom_toBottomOf=\"@+id/layout_ext_timer\"\r\n        app:layout_constraintEnd_toStartOf=\"@+id/layout_ext_timer\"\r\n        app:layout_constraintHorizontal_bias=\"0.0\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"@+id/layout_ext_timer\"\r\n        tools:visibility=\"visible\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/subSub\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_below=\"@id/text_view_category\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_marginTop=\"8dp\"\r\n        android:fontFamily=\"@font/reemkufi_medium\"\r\n        android:text=\"Learn\"\r\n        android:textAllCaps=\"true\"\r\n        android:textColor=\"@color/primary\"\r\n        android:textSize=\"20sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/text_view_category\"\r\n        app:layout_constraintStart_toStartOf=\"@+id/text_view_category\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/text_view_category\"\r\n        tools:ignore=\"HardcodedText\" />\r\n\r\n    <include\r\n        android:id=\"@+id/layout_ext_timer\"\r\n        layout=\"@layout/layout_timer\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_below=\"@id/subSub\"\r\n        android:layout_alignParentEnd=\"true\"\r\n        android:layout_marginTop=\"4dp\"\r\n        android:layout_marginEnd=\"10dp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/subSub\" />\r\n\r\n    <androidx.viewpager2.widget.ViewPager2\r\n        android:id=\"@+id/view_pager_identifying_nouns\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"300dp\"\r\n        android:layout_marginTop=\"4dp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/layout_ext_timer\" />\r\n\r\n    <LinearLayout\r\n        android:id=\"@+id/linearLayout\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginHorizontal=\"@dimen/grid_20\"\r\n        android:orientation=\"horizontal\"\r\n        android:visibility=\"invisible\"\r\n        android:weightSum=\"4\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/view_pager_identifying_nouns\"\r\n        tools:visibility=\"visible\">\r\n\r\n        <TextView\r\n\r\n            android:id=\"@+id/key_1\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_weight=\"1\"\r\n            android:background=\"@drawable/keys_button_background\"\r\n            android:backgroundTint=\"@color/primary\"\r\n            android:fontFamily=\"@font/jellee_roman\"\r\n            android:foreground=\"?attr/selectableItemBackground\"\r\n            android:gravity=\"center\"\r\n            android:textColor=\"@color/primary\"\r\n            android:textSize=\"12sp\"\r\n            android:textStyle=\"bold\"\r\n            android:textAllCaps=\"true\"\r\n            android:paddingVertical=\"@dimen/grid_10\"\r\n            android:layout_marginHorizontal=\"8dp\"\r\n            android:padding=\"@dimen/grid_10\"\r\n            app:elevation=\"0dp\"\r\n            app:shapeAppearanceOverlay=\"@style/ShapeAppearanceOverlay.MyApp.Button.Rounded\"\r\n            tools:text=\"Common Noun\" />\r\n\r\n        <TextView\r\n            android:padding=\"@dimen/grid_10\"\r\n            android:id=\"@+id/key_2\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginHorizontal=\"8dp\"\r\n            android:layout_weight=\"1\"\r\n            android:background=\"@drawable/keys_button_background\"\r\n            android:backgroundTint=\"@color/primary\"\r\n            android:fontFamily=\"@font/jellee_roman\"\r\n            android:foreground=\"?attr/selectableItemBackground\"\r\n            android:gravity=\"center\"\r\n            android:textColor=\"@color/primary\"\r\n            android:textSize=\"12sp\"\r\n            android:textStyle=\"bold\"\r\n            android:paddingVertical=\"@dimen/grid_10\"\r\n            app:elevation=\"0dp\"\r\n            android:textAllCaps=\"true\"\r\n            app:shapeAppearanceOverlay=\"@style/ShapeAppearanceOverlay.MyApp.Button.Rounded\"\r\n            tools:text=\"Proper Noun\" />\r\n\r\n        <TextView\r\n            android:padding=\"@dimen/grid_10\"\r\n            android:id=\"@+id/key_3\"\r\n            android:layout_marginHorizontal=\"8dp\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_weight=\"1\"\r\n            android:background=\"@drawable/keys_button_background\"\r\n            android:backgroundTint=\"@color/primary\"\r\n            android:fontFamily=\"@font/jellee_roman\"\r\n            android:foreground=\"?attr/selectableItemBackground\"\r\n            android:paddingVertical=\"@dimen/grid_10\"\r\n            android:gravity=\"center\"\r\n            android:textColor=\"@color/primary\"\r\n            android:textSize=\"12sp\"\r\n            android:textStyle=\"bold\"\r\n            app:elevation=\"0dp\"\r\n            android:textAllCaps=\"true\"\r\n            app:shapeAppearanceOverlay=\"@style/ShapeAppearanceOverlay.MyApp.Button.Rounded\"\r\n            tools:text=\"Proper Noun\" />\r\n\r\n        <TextView\r\n            android:padding=\"@dimen/grid_10\"\r\n            android:id=\"@+id/key_4\"\r\n            android:layout_marginHorizontal=\"8dp\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_weight=\"1\"\r\n            android:background=\"@drawable/keys_button_background\"\r\n            android:paddingVertical=\"@dimen/grid_10\"\r\n            android:backgroundTint=\"@color/primary\"\r\n            android:fontFamily=\"@font/jellee_roman\"\r\n            android:foreground=\"?attr/selectableItemBackground\"\r\n            android:gravity=\"center\"\r\n            android:textColor=\"@color/primary\"\r\n            android:textSize=\"12sp\"\r\n            android:textStyle=\"bold\"\r\n            app:elevation=\"0dp\"\r\n            android:textAllCaps=\"true\"\r\n            app:shapeAppearanceOverlay=\"@style/ShapeAppearanceOverlay.MyApp.Button.Rounded\"\r\n            tools:text=\"Proper Noun\" />\r\n    </LinearLayout>\r\n\r\n    <ToggleButton\r\n        android:id=\"@+id/playPause\"\r\n        android:layout_width=\"60dp\"\r\n        android:layout_height=\"60dp\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:background=\"@drawable/round_rect_button_bg\"\r\n        android:backgroundTint=\"@color/primary\"\r\n        android:drawableTop=\"@drawable/play_button\"\r\n        android:foreground=\"?android:attr/selectableItemBackground\"\r\n        android:paddingTop=\"10dp\"\r\n        android:text=\"\"\r\n        android:textOff=\"\"\r\n        android:textOn=\"\"\r\n        app:layout_constraintBottom_toTopOf=\"@+id/giveTestButton\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/linearLayout\"\r\n        tools:ignore=\"UnusedAttribute\" />\r\n\r\n\r\n    <com.airbnb.lottie.LottieAnimationView\r\n        android:id=\"@+id/image_view_teacher\"\r\n        android:layout_width=\"110dp\"\r\n        android:layout_height=\"120dp\"\r\n        android:layout_alignParentEnd=\"true\"\r\n        app:layout_constraintBottom_toTopOf=\"@+id/giveTestButton\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/giveTestButton\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/linearLayout\"\r\n        app:layout_constraintVertical_bias=\"1.0\"\r\n        app:lottie_loop=\"true\"\r\n        app:lottie_rawRes=\"@raw/talking_avatar\" />\r\n\r\n    <LinearLayout\r\n        android:id=\"@+id/giveTestButton\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_alignParentBottom=\"true\"\r\n        android:layout_marginHorizontal=\"30dp\"\r\n        android:layout_marginBottom=\"@dimen/grid_1\"\r\n        android:background=\"@drawable/tv_shape\"\r\n        android:backgroundTint=\"@color/primary\"\r\n        android:orientation=\"horizontal\"\r\n        android:padding=\"@dimen/grid_10\"\r\n        app:layout_constraintBottom_toBottomOf=\"parent\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\">\r\n\r\n\r\n        <TextView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_gravity=\"center\"\r\n            android:fontFamily=\"@font/reemkufi_medium\"\r\n            android:gravity=\"center\"\r\n            android:text=\"Take Test\"\r\n            android:textAlignment=\"center\"\r\n            android:textAllCaps=\"true\"\r\n            android:textColor=\"@color/white\"\r\n            android:textSize=\"@dimen/default_font_size_big\" />\r\n    </LinearLayout>\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_grammar.xml b/app/src/main/res/layout/activity_grammar.xml
--- a/app/src/main/res/layout/activity_grammar.xml	(revision 7a276194d708deddf726aad7126afc97f2f4da50)
+++ b/app/src/main/res/layout/activity_grammar.xml	(date 1668837807907)
@@ -99,7 +99,7 @@
         android:id="@+id/linearLayout"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
-        android:layout_marginHorizontal="@dimen/grid_20"
+        android:layout_marginHorizontal="@dimen/grid_10"
         android:orientation="horizontal"
         android:visibility="invisible"
         android:weightSum="4"
@@ -109,8 +109,8 @@
         <TextView
 
             android:id="@+id/key_1"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
+            android:layout_width="match_parent"
+            android:layout_height="match_parent"
             android:layout_weight="1"
             android:background="@drawable/keys_button_background"
             android:backgroundTint="@color/primary"
@@ -122,8 +122,8 @@
             android:textStyle="bold"
             android:textAllCaps="true"
             android:paddingVertical="@dimen/grid_10"
-            android:layout_marginHorizontal="8dp"
-            android:padding="@dimen/grid_10"
+            android:layout_marginHorizontal="4dp"
+            android:paddingHorizontal="2dp"
             app:elevation="0dp"
             app:shapeAppearanceOverlay="@style/ShapeAppearanceOverlay.MyApp.Button.Rounded"
             tools:text="Common Noun" />
@@ -131,9 +131,9 @@
         <TextView
             android:padding="@dimen/grid_10"
             android:id="@+id/key_2"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:layout_marginHorizontal="8dp"
+            android:layout_width="match_parent"
+            android:layout_height="match_parent"
+            android:layout_marginHorizontal="4dp"
             android:layout_weight="1"
             android:background="@drawable/keys_button_background"
             android:backgroundTint="@color/primary"
@@ -144,6 +144,7 @@
             android:textSize="12sp"
             android:textStyle="bold"
             android:paddingVertical="@dimen/grid_10"
+            android:paddingHorizontal="2dp"
             app:elevation="0dp"
             android:textAllCaps="true"
             app:shapeAppearanceOverlay="@style/ShapeAppearanceOverlay.MyApp.Button.Rounded"
@@ -152,9 +153,10 @@
         <TextView
             android:padding="@dimen/grid_10"
             android:id="@+id/key_3"
-            android:layout_marginHorizontal="8dp"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
+            android:paddingHorizontal="2dp"
+            android:layout_marginHorizontal="4dp"
+            android:layout_width="match_parent"
+            android:layout_height="match_parent"
             android:layout_weight="1"
             android:background="@drawable/keys_button_background"
             android:backgroundTint="@color/primary"
@@ -171,12 +173,12 @@
             tools:text="Proper Noun" />
 
         <TextView
-            android:padding="@dimen/grid_10"
             android:id="@+id/key_4"
-            android:layout_marginHorizontal="8dp"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
+            android:layout_marginHorizontal="4dp"
+            android:layout_width="match_parent"
+            android:layout_height="match_parent"
             android:layout_weight="1"
+            android:paddingHorizontal="2dp"
             android:background="@drawable/keys_button_background"
             android:paddingVertical="@dimen/grid_10"
             android:backgroundTint="@color/primary"
